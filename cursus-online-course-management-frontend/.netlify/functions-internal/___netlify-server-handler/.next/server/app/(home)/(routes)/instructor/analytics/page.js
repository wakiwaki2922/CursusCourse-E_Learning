(()=>{var e={};e.id=3593,e.ids=[3593],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},56329:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(75302),r(47155),r(85877),r(35866),r(92414),r(26083);var s=r(23191),a=r(88716),n=r(37922),o=r.n(n),i=r(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["(home)",{children:["(routes)",{children:["instructor",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,75302)),"C:\\Users\\Kyrov\\Desktop\\CursusCourse-elearning\\cursus-online-course-management-frontend\\app\\(home)\\(routes)\\instructor\\analytics\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,47155)),"C:\\Users\\Kyrov\\Desktop\\CursusCourse-elearning\\cursus-online-course-management-frontend\\app\\(home)\\(routes)\\instructor\\layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85877)),"C:\\Users\\Kyrov\\Desktop\\CursusCourse-elearning\\cursus-online-course-management-frontend\\app\\(home)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,92414)),"C:\\Users\\Kyrov\\Desktop\\CursusCourse-elearning\\cursus-online-course-management-frontend\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,26083)),"C:\\Users\\Kyrov\\Desktop\\CursusCourse-elearning\\cursus-online-course-management-frontend\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\Kyrov\\Desktop\\CursusCourse-elearning\\cursus-online-course-management-frontend\\app\\(home)\\(routes)\\instructor\\analytics\\page.tsx"],u="/(home)/(routes)/instructor/analytics/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(home)/(routes)/instructor/analytics/page",pathname:"/instructor/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},507:(e,t,r)=>{Promise.resolve().then(r.bind(r,89207))},7550:(e,t,r)=>{Promise.resolve().then(r.bind(r,7449))},89207:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Z});var s=r(10326),a=r(35047),n=r(33071),o=r(34474),i=r(90072),l=r(17577);let c=({value:e,label:t,shouldFormat:r,onSelectChange:a})=>{let[c,d]=(0,l.useState)(1);return(0,l.useEffect)(()=>{1!==c&&a(c)},[c,a]),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsxs)(n.ll,{className:"text-sm font-medium",children:[t," of last ",c," ",c>1?"months":"month"]}),(0,s.jsxs)(o.Ph,{onValueChange:e=>d(parseInt(e)),children:[s.jsx(o.i4,{className:"w-fit",children:s.jsx(o.ki,{})}),s.jsx(o.Bw,{children:(0,s.jsxs)(o.DI,{children:[s.jsx(o.n5,{children:t}),s.jsx(o.Ql,{value:"1",children:"Last 1 month"}),s.jsx(o.Ql,{value:"3",children:"Last 3 months"}),s.jsx(o.Ql,{value:"6",children:"Last 6 months"}),s.jsx(o.Ql,{value:"9",children:"Last 9 months"}),s.jsx(o.Ql,{value:"12",children:"Last 1 year"})]})})]})]}),s.jsx(n.aY,{children:s.jsx("div",{className:"text-2xl font-bold",children:r?(0,i.T)(e):e})})]})};var d=r(49547);let u=async(e,t)=>{try{let r=await h(),s=await x(),a=await m(t),n=await p(e);return{pieChartData:r,composedChartData:s,totalRevenue:n,totalSales:a}}catch(e){return console.log("[ACTION_GET_ANALYTICS]",e),{pieChartData:[],composedChartData:[],totalRevenue:0,totalSales:0}}},p=async e=>{try{let t=`/api/instructor/statistic/auth/quarterly_revenue/${e}`;return(await d.Z.get(t)).data}catch(e){return console.error("[ACTIONS_GET_TOTAL_REVENUE]",e),0}},m=async e=>{try{let t=`/api/instructor/statistic/auth/quarterly_number_of_enrollment/${e}`;return console.log("[ENDPOINT]",t),(await d.Z.get(t)).data}catch(e){return console.error("[ACTIONS_GET_TOTAL_SALES]",e),0}},h=async()=>{try{let e=(await d.Z.get("/api/instructor/statistic/auth/revenue_of_each_course")).data;return Object.entries(e).map(([e,t])=>({name:e,total:t}))}catch(e){return console.error("[ACTIONS_GET_CHARTS]",e),[]}},x=async()=>{try{return(await d.Z.get("/api/instructor/statistic/auth/compose_analysis")).data}catch(e){return console.error("[ACTIONS_GET_COMPOSED_CHART]",e),[]}};var f=r(88996),g=r(30660),y=r(20751),j=r(78948),w=r(99630),v=r(69274);let N=["#0088FE","#00C49F","#FFBB28","#FF8042"],C=Math.PI/180,b=({cx:e,cy:t,midAngle:r,innerRadius:a,outerRadius:n,percent:o,index:i})=>{let l=a+(n-a)*.5,c=e+l*Math.cos(-r*C);return s.jsx("text",{x:c,y:t+l*Math.sin(-r*C),fill:"white",textAnchor:c>e?"start":"end",dominantBaseline:"central",children:`${(100*o).toFixed(0)}%`})},_=e=>{let{payload:t}=e;return s.jsx("ul",{className:"list-none p-0 m-0 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-center",children:[s.jsx("span",{className:"w-4 h-4 mr-2",style:{backgroundColor:e.color}}),s.jsx("span",{className:"break-words",children:e.value})]},`item-${t}`))})},T=({label:e,data:t})=>s.jsx(s.Fragment,{children:(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(n.ll,{className:"text-sm font-medium",children:e})}),s.jsx(g.h,{width:"100%",height:400,children:(0,s.jsxs)(y.u,{children:[s.jsx(j.b,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:b,outerRadius:80,fill:"#8884d8",dataKey:"total",children:t.sort((e,t)=>t.total-e.total).map((e,t)=>s.jsx(w.b,{fill:N[t%N.length]},`cell-${t}`))}),s.jsx(v.D,{content:_})]})})]})});var k=r(45661),P=r(18423),S=r(62637),E=r(9997),R=r(44675),D=r(8564),q=r(74390);class A extends l.PureComponent{render(){let{data:e}=this.props;return s.jsx(s.Fragment,{children:s.jsx(n.Zb,{children:s.jsx(g.h,{width:"100%",height:"100%",children:(0,s.jsxs)(k.c,{width:500,height:300,data:e,margin:{top:20,right:30,left:20,bottom:20},children:[s.jsx(P.q,{strokeDasharray:"3 3"}),s.jsx(S.K,{dataKey:"monthYear"}),s.jsx(E.B,{yAxisId:"left"}),s.jsx(E.B,{yAxisId:"right",orientation:"right"}),s.jsx(R.u,{}),s.jsx(v.D,{}),s.jsx(D.$,{yAxisId:"left",type:"monotone",dataKey:"totalRevenue",fill:"#82ca9d",barSize:20}),s.jsx(q.x,{yAxisId:"right",type:"monotone",dataKey:"numberOfEnrollments",stroke:"#8884d8",activeDot:{r:8}})]})})})})}}let Z=()=>{let e=(0,a.useRouter)(),[t,r]=(0,l.useState)({pieChartData:[],composedChartData:[],totalRevenue:0,totalSales:0}),[n,o]=(0,l.useState)(1),[i,d]=(0,l.useState)(1),p=async(e,t)=>{let{pieChartData:s,composedChartData:a,totalRevenue:n,totalSales:o}=await u(e,t);r({pieChartData:s||[],composedChartData:a||[],totalRevenue:n,totalSales:o})};return(0,l.useEffect)(()=>{f.w?p(n,i):(0,a.redirect)("/")},[e,n,i]),s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsx(c,{label:"Total Sales",value:t.totalSales,onSelectChange:e=>d(e)}),s.jsx(c,{label:"Total Revenue",value:t.totalRevenue,shouldFormat:!0,onSelectChange:e=>o(e)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsx(T,{label:"Percent revenue of each course in last month",data:t.pieChartData}),s.jsx(A,{data:t.composedChartData})]})]})})}},7449:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(10326),a=r(88996),n=r(14960),o=r(35047),i=r(17577);let l=({children:e})=>{(0,n.j)();let t=(0,o.useRouter)();return(0,i.useEffect)(()=>{(0,a.w)()||t.push("/authenticate/login")},[t]),s.jsx(s.Fragment,{children:e})}},33071:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>i,SZ:()=>c,Zb:()=>o,aY:()=>d,eW:()=>u,ll:()=>l});var s=r(10326),a=r(17577),n=r(77863);let o=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card";let i=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent";let u=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},34474:(e,t,r)=>{"use strict";r.d(t,{Bw:()=>f,DI:()=>u,Ph:()=>d,Ql:()=>y,i4:()=>m,ki:()=>p,n5:()=>g});var s=r(10326),a=r(17577),n=r(57160),o=r(941),i=r(96633),l=r(32933),c=r(77863);let d=n.fC,u=n.ZA,p=n.B4,m=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(n.xz,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(n.JO,{asChild:!0,children:s.jsx(o.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=n.xz.displayName;let h=a.forwardRef(({className:e,...t},r)=>s.jsx(n.u_,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(i.Z,{className:"h-4 w-4"})}));h.displayName=n.u_.displayName;let x=a.forwardRef(({className:e,...t},r)=>s.jsx(n.$G,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(o.Z,{className:"h-4 w-4"})}));x.displayName=n.$G.displayName;let f=a.forwardRef(({className:e,children:t,position:r="popper",...a},o)=>s.jsx(n.h_,{children:(0,s.jsxs)(n.VY,{ref:o,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...a,children:[s.jsx(h,{}),s.jsx(n.l_,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(x,{})]})}));f.displayName=n.VY.displayName;let g=a.forwardRef(({className:e,...t},r)=>s.jsx(n.__,{ref:r,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));g.displayName=n.__.displayName;let y=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(n.ck,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(n.wU,{children:s.jsx(l.Z,{className:"h-4 w-4"})})}),s.jsx(n.eT,{children:t})]}));y.displayName=n.ck.displayName,a.forwardRef(({className:e,...t},r)=>s.jsx(n.Z0,{ref:r,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=n.Z0.displayName},49547:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(44099);r(95044);let a=s.Z.create({baseURL:"https://guardianshield.uk/",withCredentials:!0});a.interceptors.request.use(async e=>{let t;return t&&(e.headers.Authorization=`Bearer ${t}`),e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e));let n=a},90072:(e,t,r)=>{"use strict";r.d(t,{T:()=>s});let s=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},14960:(e,t,r)=>{"use strict";r.d(t,{j:()=>c});var s=r(95044),a=r(18766),n=r(49547);let o=async e=>{try{return await n.Z.get("/api/auth/verifyToken?token="+e),console.log("[ACTIONS_IS_TOKEN_EXPIRED] Token is valid"),!1}catch(e){return console.log("[ACTIONS_IS_TOKEN_EXPIRED]",e),!0}},i=async({accessToken:e,refreshToken:t})=>{try{console.log("[ACTIONS_GET_REFRESH_TOKEN] Requesting refresh token: accessToken",e,"refreshToken",t);let r=await n.Z.post("/api/auth/refreshToken",{accessToken:e,refreshToken:t});return console.log("[ACTIONS_GET_REFRESH_TOKEN] Refresh token response: ",r.data),r.data}catch(e){if(console.error("[ACTIONS_GET_REFRESH_TOKEN]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},l=()=>{},c=async()=>{let e=s.Z.get("jwtToken"),t=s.Z.get("refreshToken");if(!e||!t)return l(),!1;if(await o(e)===!0)try{let r=await i({accessToken:e,refreshToken:t});console.log("Refresh token response: ",r),s.Z.set("jwtToken",r.token),s.Z.set("refreshToken",r.refreshToken)}catch(e){return d(e),l(),!1}return!0},d=e=>{if(e.response)switch(e.response.status){case 403:a.ZP.error("You do not have permission to access this resource.");break;case 401:a.ZP.error("Session expired. Please login again.");break;case 500:a.ZP.error("Server error. Please try again later.");break;default:a.ZP.error("An error occurred. Please try again.")}else a.ZP.error("Network error. Please check your connection.")}},75302:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>n,default:()=>i});var s=r(68570);let a=(0,s.createProxy)(String.raw`C:\Users\Kyrov\Desktop\CursusCourse-elearning\cursus-online-course-management-frontend\app\(home)\(routes)\instructor\analytics\page.tsx`),{__esModule:n,$$typeof:o}=a;a.default;let i=(0,s.createProxy)(String.raw`C:\Users\Kyrov\Desktop\CursusCourse-elearning\cursus-online-course-management-frontend\app\(home)\(routes)\instructor\analytics\page.tsx#default`)},47155:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>n,default:()=>i});var s=r(68570);let a=(0,s.createProxy)(String.raw`C:\Users\Kyrov\Desktop\CursusCourse-elearning\cursus-online-course-management-frontend\app\(home)\(routes)\instructor\layout.tsx`),{__esModule:n,$$typeof:o}=a;a.default;let i=(0,s.createProxy)(String.raw`C:\Users\Kyrov\Desktop\CursusCourse-elearning\cursus-online-course-management-frontend\app\(home)\(routes)\instructor\layout.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,6648,9936,4099,6409,8562,3487],()=>r(56329));module.exports=s})();