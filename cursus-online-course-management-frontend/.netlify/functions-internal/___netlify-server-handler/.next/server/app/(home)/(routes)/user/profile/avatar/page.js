(()=>{var e={};e.id=8798,e.ids=[8798],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},55710:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>c}),t(13853),t(40928),t(85877),t(35866),t(92414),t(26083);var s=t(23191),a=t(88716),n=t(37922),o=t.n(n),i=t(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let c=["",{children:["(home)",{children:["(routes)",{children:["user",{children:["profile",{children:["avatar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,13853)),"C:\\Users\\Kyrov\\Desktop\\CursusCourse-elearning\\cursus-online-course-management-frontend\\app\\(home)\\(routes)\\user\\profile\\avatar\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,40928)),"C:\\Users\\Kyrov\\Desktop\\CursusCourse-elearning\\cursus-online-course-management-frontend\\app\\(home)\\(routes)\\user\\layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,85877)),"C:\\Users\\Kyrov\\Desktop\\CursusCourse-elearning\\cursus-online-course-management-frontend\\app\\(home)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,92414)),"C:\\Users\\Kyrov\\Desktop\\CursusCourse-elearning\\cursus-online-course-management-frontend\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,26083)),"C:\\Users\\Kyrov\\Desktop\\CursusCourse-elearning\\cursus-online-course-management-frontend\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["C:\\Users\\Kyrov\\Desktop\\CursusCourse-elearning\\cursus-online-course-management-frontend\\app\\(home)\\(routes)\\user\\profile\\avatar\\page.tsx"],d="/(home)/(routes)/user/profile/avatar/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(home)/(routes)/user/profile/avatar/page",pathname:"/user/profile/avatar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},18261:(e,r,t)=>{Promise.resolve().then(t.bind(t,8936))},77558:(e,r,t)=>{Promise.resolve().then(t.bind(t,89062))},83994:(e,r,t)=>{"use strict";t.d(r,{GA:()=>i,Mu:()=>l,gg:()=>n,hH:()=>o,lm:()=>c,xC:()=>a});var s=t(49547);let a=async()=>{try{return(await s.Z.get("/api/admin/auth/getAllStudent")).data}catch(e){return console.log("[ACTIONS_GET_STUDENT_WITH_ENROLLMENT]",e),[]}},n=async e=>{try{let r=new FormData;r.append("file",e);let t=await s.Z.put("/api/user/auth/uploadAvatar",r);return console.log("Upload response",t.data),t.data}catch(e){if(console.error("[ACTIONS_UPLOAD_AVATAR]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},o=async e=>{try{return(await s.Z.get("/api/courses/auth/getStudentOwnedCoursesById",{params:{userId:e}})).data}catch(e){return console.log("[ACTIONS_GET_STUDENT_OWN_COURSES]",e),[]}},i=async e=>{try{return(await s.Z.get("/api/user/auth/getUserById",{params:{userId:e}})).data}catch(e){return console.error("[ACTIONS_GET_USER]",e),null}},l=async(e,r)=>{try{let t=`/api/admin/auth/updateStatusUser/${e}`;return(await s.Z.put(t,null,{params:{newStatus:r}})).data}catch(e){if(console.error("[ACTIONS_GET_USER]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},c=async e=>{try{return(await s.Z.get(`/api/auth/sendVerifyEmail/${e}`)).data}catch(e){if(console.error("[ACTIONS_VERIFY_EMAIL]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}}},31200:(e,r,t)=>{"use strict";t.d(r,{Cp:()=>i,Nq:()=>o,PR:()=>n,ZP:()=>a,zP:()=>l});var s=t(49547);let a=async()=>{try{return(await s.Z.get("/api/user/auth/getFullUserDetails")).data}catch(e){return console.error("[ACTIONS_GET_FULL_USER_DETAILS]",e),null}},n=async()=>{try{return(await s.Z.get("/api/user/auth/getUser")).data}catch(e){return console.error("[ACTIONS_GET_USER]",e),null}},o=async e=>{try{return(await s.Z.put("/api/user/auth/updateUser",e)).data}catch(e){if(console.error("[ACTIONS_UPDATE_USER]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},i=async e=>{try{return(await s.Z.patch("/api/user/auth/changePassword",e)).data}catch(e){if(console.error("[ACTIONS_CHANGE_PASSWORD]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},l=async e=>{try{return(await s.Z.put("/api/user/auth/registerBecomeInstructor",e)).data}catch(e){if(console.error("[ACTIONS_REGISTER_BECOME_INSTRUCTOR]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}}},95090:(e,r,t)=>{"use strict";t.d(r,{Z:()=>d});var s=t(10326),a=t(83994),n=t(31200),o=t(90772),i=t(77083),l=t(96580),c=t(17577),u=t(18766);let d=()=>{let[e,r]=(0,c.useState)();if((0,c.useEffect)(()=>{(async()=>{try{let e=await (0,n.ZP)();r(e)}catch(e){u.ZP.error(e.message||"Failed to get user")}})()},[]),!e)return null;console.log("Form header user data",e);let t=async()=>{try{await (0,a.lm)(e?.email),u.ZP.success("Verification email sent! Check your inbox")}catch(e){u.ZP.error(e.message||"Something went wrong")}};return(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.x,{}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[s.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings and what you wanna be in Cursus"})]}),!(0,l.pE)()&&s.jsx(o.z,{onClick:t,children:"Verify account"})]})}},92632:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n});var s=t(10326),a=t(35047);let n=()=>{(0,a.useRouter)();let e=(0,a.usePathname)(),r=r=>{let t="inline-flex items-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:text-accent-foreground h-9 px-4 py-2 justify-start";return e===r?`${t} bg-muted hover:bg-muted`:`${t} hover:bg-transparent hover:underline`};return(0,s.jsxs)("nav",{className:"flex flex-wrap space-x-0 lg:flex-col lg:space-x-0 lg:space-y-1",children:[s.jsx("a",{href:"/user/profile",className:r("/user/profile"),children:"Profile"}),s.jsx("a",{href:"/user/profile/avatar",className:r("/user/profile/avatar"),children:"Upload Avatar"}),s.jsx("a",{href:"/user/profile/password",className:r("/user/profile/password"),children:"Edit Password"}),s.jsx("a",{href:"/user/profile/account",className:r("/user/profile/account"),children:"Account"})]})}},8936:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var s=t(10326),a=t(17577),n=t(82832),o=t(96580),i=t(14960);let l=({children:e})=>{let[r,t]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(0,i.j)(),t((0,o.Wv)()),c((0,o.pE)())},[]),(0,s.jsxs)(s.Fragment,{children:[r&&s.jsx(n.j,{label:"Your student account is blocked. Please contact support."}),!l&&s.jsx(n.j,{label:"Your account is not verified. Please verify your account to continue."}),e]})}},89062:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>v});var s=t(10326),a=t(17577),n=t(18766),o=t(92632),i=t(90772),l=t(13961),c=t(44389),u=t(71709),d=t(46226),p=t(49437),m=t(83994),h=t(31200);let g=({initialData:e,userId:r,onAvatarUpdated:t})=>{let[o,g]=(0,a.useState)(!1),x=()=>g(e=>!e),f=async(e,r)=>{try{console.log("Uploading image",e,r),await (0,m.gg)(r);let s=await (0,h.ZP)();localStorage.setItem("userData",JSON.stringify(s)),n.ZP.success("Image uploaded successfully"),x(),t()}catch(e){n.ZP.error(e.message||"Failed to upload image")}};return(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.Toaster,{}),(0,s.jsxs)("div",{className:"mt-6 border bg-slate-100 rounded-md p-4",children:[(0,s.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Avatar Image",(0,s.jsxs)(i.z,{onClick:x,variant:"ghost",children:[o&&s.jsx(s.Fragment,{children:"Cancel"}),!o&&!e&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.Z,{className:"h-4 w-4 mr-2"}),"Add image"]}),!o&&e&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Edit image"]})]})]}),!o&&(e?s.jsx("div",{className:"relative aspect-square mt-2",children:s.jsx(d.default,{alt:"Upload",fill:!0,className:"object-cover rounded-md",src:e,sizes:"(max-width: 640px) 100vw, 50vw",priority:!0})}):s.jsx("div",{className:"flex items-center justify-center h-60 bg-slate-200 rounded-md",children:s.jsx(u.Z,{className:"h-10 w-10 text-slate-500"})})),o&&(0,s.jsxs)("div",{children:[s.jsx(p.Z,{className:"p-10 my-4 border border-muted-foreground rounded-md",id:r||"",onUpload:f}),s.jsx("div",{className:"text-xs text-muted-foreground mt-4",children:"4:4 aspect ratio recommended"})]})]})]})};var x=t(18713),f=t(95090);let v=()=>{let[e,r]=(0,a.useState)(null),[t,i]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),[u,d]=(0,a.useState)(!0),p=(0,a.useCallback)(async()=>{try{let t=localStorage.getItem("userData");t&&r(JSON.parse(t)),e?.avatarImageUrl?c(!0):c(!1)}catch(e){n.ZP.error(e.message||"Failed to get user")}finally{d(!1)}},[e?.avatarImageUrl]);return((0,a.useEffect)(()=>{p()},[p]),u)?s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex flex-col items-center justify-center h-screen",children:s.jsx(x.Z,{})})}):s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:"p-6",children:[s.jsx(n.Toaster,{}),s.jsx("div",{className:"rounded-[0.5rem] border bg-background shadow",children:(0,s.jsxs)("div",{className:"space-y-6 p-10 pb-16",children:[s.jsx(f.Z,{}),s.jsx("div",{className:"shrink-0 bg-border h-[1px] w-full my-6"}),(0,s.jsxs)("div",{className:"flex flex-col space-y-8 lg:flex-row lg:space-x-12 lg:space-y-0",children:[s.jsx("aside",{className:"-mx-4 lg:w-1/5",children:s.jsx(o.Z,{})}),s.jsx("div",{className:"flex-1 lg:max-w-2xl",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium",children:"Upload Avatar"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload your account avater."})]}),s.jsx("div",{className:"shrink-0 bg-border h-[1px] w-full my-6"}),l?s.jsx(g,{initialData:e?.avatarImageUrl,userId:e?.uid,onAvatarUpdated:p}):s.jsx(g,{initialData:t?.avatarImageUrl,userId:t?.userId,onAvatarUpdated:p})]})})]})]})})]})})}},18713:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var s=t(10326);function a(){return s.jsx("l-jelly",{color:"rgb(6 83 142)"})}t(17577)},82832:(e,r,t)=>{"use strict";t.d(r,{j:()=>u});var s=t(10326),a=t(50949),n=t(30361),o=t(48449),i=t(77863);let l=(0,o.j)("border text-center p-4 text-sm flex items-center w-full",{variants:{variant:{warning:"bg-yellow-200/80 border-yellow-30 text-primary",success:"bg-emerald-700 border-emerald-800 text-secondary"}},defaultVariants:{variant:"warning"}}),c={warning:a.Z,success:n.Z},u=({label:e,variant:r})=>{let t=c[r||"warning"];return(0,s.jsxs)("div",{className:(0,i.cn)(l({variant:r})),children:[s.jsx(t,{className:"h-4 w-4 mr-2"}),e]})}},49437:(e,r,t)=>{"use strict";t.d(r,{Z:()=>c});var s=t(10326),a=t(94019),n=t(46226),o=t(17577),i=t(23920),l=t(90772);let c=({className:e,id:r,onUpload:t})=>{let[c,u]=(0,o.useState)([]),d=(0,o.useCallback)(e=>{e?.length&&u(r=>[...r,...e].map(e=>Object.assign(e,{preview:URL.createObjectURL(e),isVideo:e.type.startsWith("video/")})))},[]),p=()=>{c.forEach(e=>{t(r,e)}),u([])},{getRootProps:m,getInputProps:h,isDragActive:g}=(0,i.uI)({onDrop:d,multiple:!1}),x=e=>{u(r=>r.filter(r=>r.name!==e))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{...m(),className:e,children:[s.jsx("input",{...h()}),g?s.jsx("p",{children:"Drop the files here ..."}):s.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop some files here, or click to select files"})]}),s.jsx("ul",{children:c.map(e=>(0,s.jsxs)("li",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)(l.z,{type:"button",title:"Remove file",onClick:()=>x(e.name),variant:"ghost",className:"top-0 right-0 flex",children:[s.jsx(a.Z,{className:"h-4 w-4"}),s.jsx("p",{children:"Remove"})]}),s.jsx(l.z,{onClick:p,disabled:!c.length,children:"Upload"})]}),e.type.startsWith("video/")?s.jsx("video",{src:e.preview,width:e.size,height:e.size,className:"video-preview",controls:!0,onLoadedData:()=>URL.revokeObjectURL(e.preview)}):e.type.startsWith("image/")&&e.size<5e6?s.jsx(n.default,{src:e.preview,alt:e.name,width:e.size,height:e.size,style:{objectFit:"cover"},onLoad:()=>URL.revokeObjectURL(e.preview)}):(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.name," - File type not supported or file size is too large"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:e.name})]},e.name))})]})}},49547:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n});var s=t(44099);t(95044);let a=s.Z.create({baseURL:"https://guardianshield.uk/",withCredentials:!0});a.interceptors.request.use(async e=>{let r;return r&&(e.headers.Authorization=`Bearer ${r}`),e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e));let n=a},14960:(e,r,t)=>{"use strict";t.d(r,{j:()=>c});var s=t(95044),a=t(18766),n=t(49547);let o=async e=>{try{return await n.Z.get("/api/auth/verifyToken?token="+e),console.log("[ACTIONS_IS_TOKEN_EXPIRED] Token is valid"),!1}catch(e){return console.log("[ACTIONS_IS_TOKEN_EXPIRED]",e),!0}},i=async({accessToken:e,refreshToken:r})=>{try{console.log("[ACTIONS_GET_REFRESH_TOKEN] Requesting refresh token: accessToken",e,"refreshToken",r);let t=await n.Z.post("/api/auth/refreshToken",{accessToken:e,refreshToken:r});return console.log("[ACTIONS_GET_REFRESH_TOKEN] Refresh token response: ",t.data),t.data}catch(e){if(console.error("[ACTIONS_GET_REFRESH_TOKEN]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},l=()=>{},c=async()=>{let e=s.Z.get("jwtToken"),r=s.Z.get("refreshToken");if(!e||!r)return l(),!1;if(await o(e)===!0)try{let t=await i({accessToken:e,refreshToken:r});console.log("Refresh token response: ",t),s.Z.set("jwtToken",t.token),s.Z.set("refreshToken",t.refreshToken)}catch(e){return u(e),l(),!1}return!0},u=e=>{if(e.response)switch(e.response.status){case 403:a.ZP.error("You do not have permission to access this resource.");break;case 401:a.ZP.error("Session expired. Please login again.");break;case 500:a.ZP.error("Server error. Please try again later.");break;default:a.ZP.error("An error occurred. Please try again.")}else a.ZP.error("Network error. Please check your connection.")}},71709:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},40928:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>n,default:()=>i});var s=t(68570);let a=(0,s.createProxy)(String.raw`C:\Users\Kyrov\Desktop\CursusCourse-elearning\cursus-online-course-management-frontend\app\(home)\(routes)\user\layout.tsx`),{__esModule:n,$$typeof:o}=a;a.default;let i=(0,s.createProxy)(String.raw`C:\Users\Kyrov\Desktop\CursusCourse-elearning\cursus-online-course-management-frontend\app\(home)\(routes)\user\layout.tsx#default`)},13853:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>n,default:()=>i});var s=t(68570);let a=(0,s.createProxy)(String.raw`C:\Users\Kyrov\Desktop\CursusCourse-elearning\cursus-online-course-management-frontend\app\(home)\(routes)\user\profile\avatar\page.tsx`),{__esModule:n,$$typeof:o}=a;a.default;let i=(0,s.createProxy)(String.raw`C:\Users\Kyrov\Desktop\CursusCourse-elearning\cursus-online-course-management-frontend\app\(home)\(routes)\user\profile\avatar\page.tsx#default`)}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[8948,6648,9936,4099,1572,3487],()=>t(55710));module.exports=s})();