exports.id=1469,exports.ids=[1469],exports.modules={3387:(e,t,s)=>{Promise.resolve().then(s.bind(s,64541))},67682:(e,t,s)=>{"use strict";s.d(t,{Dv:()=>d,PS:()=>l,aA:()=>a,d7:()=>n,dq:()=>c,mt:()=>i});var r=s(96580),o=s(49547);let a=async(e,t)=>{if((0,r.yn)())throw Error("You are not allowed to create lesson");try{let s=`/api/lessons/auth/createLesson/${e}`,r=await o.Z.post(s,{title:t});return console.log("Create lesson response",r.data),r.data}catch(e){if(console.error("[ACTIONS_CREATE_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},n=async e=>{try{let t=`/api/lessons/auth/getLessonById/${e}`,s=await o.Z.get(t);return console.log("Get lesson response",s.data),s.data}catch(e){if(console.error("[ACTIONS_GET_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},l=async(e,t)=>{if((0,r.yn)())throw Error("You are not allowed to edit lesson");try{console.log("Edit lesson values",t);let s=`/api/lessons/auth/updateLesson/${e}`,r=await o.Z.put(s,t);return console.log("Update lesson response",r.data),r.data}catch(e){if(console.log("[ACTIONS_EDIT_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},c=async(e,t)=>{if((0,r.yn)())throw Error("You are not allowed to upload lesson video");try{let s=new FormData;s.append("file",t);let r=`/api/lessons/auth/uploadVideo/${e}`,a=await o.Z.put(r,s);return console.log("Upload video response",a.data),a.data}catch(e){if(console.error("[ACTIONS_UPLOAD_LESSON_VIDEO]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},i=async(e,t)=>{if((0,r.yn)())throw Error("You are not allowed to edit this lesson");try{let s=`/api/lessons/auth/course/${e}/reorderLesson`;console.log("Reorder lesson updateData",s,t);let r=await o.Z.patch(s,t);return console.log("Reorder lesson response",r.data),r.data}catch(e){if(console.error("[ACTIONS_REORDER_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},d=async e=>{if((0,r.yn)())throw Error("You are not allowed to delete lesson");try{let t=`/api/lessons/auth/deleteLessonAndReorder/${e}`,s=await o.Z.delete(t);return console.log("Delete lesson response",s.data),s.data}catch(e){if(console.error("[ACTIONS_DELETE_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}}},76493:(e,t,s)=>{"use strict";s.d(t,{c:()=>o,h:()=>a});var r=s(49547);let o=async(e,t)=>{try{let s="https://www.cursusmate.online",o=await r.Z.post("/api/payment/auth/createEnrollRequestPayment",{amount:e,currency:"USD",description:`Course enrollment for course title ${t.courseTitle}`,method:"paypal",cancelUrl:`${s}/course/${t.courseId}/lesson`,returnUrl:`${s}/course/${t.courseId}/lesson/payment-success`,payeeId:"sb-w3nfo30755669@gmail.com"});return console.log("[ACTIONS_ENROLL_PAYMENT] createEnrollPayment response: ",o.data),o.data}catch(e){if(console.error("[ACTIONS_ENROLL_PAYMENT]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},a=async(e,t,s)=>{try{console.log("[ACTIONS_ENROLL_PAYMENT] executeEnrollPayment: ",e,t);let o=await r.Z.post("/api/payment/auth/executeEnrollRequestPayment",{paymentId:e,payerId:t,courseId:s});return console.log("[ACTIONS_ENROLL_PAYMENT] executeEnrollPayment response: ",o.data),o.data}catch(e){if(console.error("[ACTIONS_ENROLL_PAYMENT]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}}},15518:(e,t,s)=>{"use strict";s.d(t,{B$:()=>l,D$:()=>c,Kz:()=>g,PI:()=>h,Uf:()=>o,V3:()=>n,Yt:()=>i,n6:()=>a,tG:()=>u,xb:()=>d});var r=s(49547);let o=async()=>{try{return(await r.Z.get("/api/courses/auth/getCoursesOfInstructor")).data}catch(e){return console.log("[ACTIONS_GET_COURSES_OF_INSTRUCTOR]",e),[]}},a=async e=>{try{return(await r.Z.get("/api/courses/auth/getCoursesOfInstructorById",{params:{userId:e}})).data}catch(e){return console.log("[ACTIONS_GET_COURSES_OF_INSTRUCTOR]",e),[]}},n=async()=>{try{return(await r.Z.get("/api/courses/getAllCourses")).data}catch(e){return console.log("[ACTIONS_GET_ALL_COURSES]",e),[]}},l=async(e,t)=>{try{return(await r.Z.get("/api/courses/searchCourses",{params:{title:e,categoryId:t}})).data}catch(e){return console.log("[ACTIONS_SEARCH_COURSES]",e),[]}},c=async()=>{try{return(await r.Z.get("/api/courses/getPublishedCourses")).data}catch(e){return console.log("[ACTIONS_GET_ALL_COURSES]",e),[]}},i=async e=>{try{let t=`/api/courses/getCourseById/${e}`,s=await r.Z.get(t);return console.log("Get course by id response",s.data),s.data}catch(e){if(console.log("[ACTIONS_GET_COURSE_BY_ID]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},d=async e=>{try{let t=`/api/courses/getCourseByIdByUser/${e}`,s=(await r.Z.get(t)).data;return console.log("Get course by id response",s),s}catch(e){if(console.log("[ACTIONS_GET_COURSE_BY_ID]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},u=async()=>{try{return(await r.Z.get("/api/category/getAll")).data}catch(e){return console.log("[ACTIONS_GET_ALL_CATEGORIES]",e),[]}},g=async()=>{try{return(await r.Z.get("/api/courses/auth/getStudentOwnedCourses")).data}catch(e){return console.log("[ACTIONS_GET_STUDENT_OWN_COURSES]",e),[]}},h=async e=>{try{return(await r.Z.get(`/api/courses/auth/getStudentOwnedCourseWithLessonsAndProgressById/${e}`)).data}catch(e){return console.log("[ACTIONS_GET_STUDENT_OWN_COURSE_BY_ID]",e),null}}},85072:(e,t,s)=>{"use strict";s.d(t,{ES:()=>a,TT:()=>o,W3:()=>l,ob:()=>n});var r=s(49547);let o=async e=>{try{let t=`/api/lessonProgress/auth/getProgressCount/${e}`;return(await r.Z.get(t)).data}catch(e){return console.log("[ACTIONS_GET_PROGRESS_COUNT]",e),0}},a=async(e,t)=>{try{let s=`/api/lessonProgress/auth/course/${e}/lesson/${t}/completed`,o=await r.Z.post(s);return console.log("[ACTIONS_COMPLETED_LESSON]",o.data),o.data}catch(e){if(console.log("[ACTIONS_COMPLETED_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong! Completed lesson failed");throw Error(e.message||"Something went wrong! Completed lesson failed")}},n=async(e,t)=>{try{let s=`/api/lessonProgress/auth/course/${e}/lesson/${t}/uncompleted`,o=await r.Z.patch(s);return console.log("[ACTIONS_UNCOMPLETED_LESSON]",o.data),o.data}catch(e){if(console.log("[ACTIONS_UNCOMPLETED_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong! Uncompleted lesson failed");throw Error(e.message||"Something went wrong! Uncompleted lesson failed")}},l=async e=>{try{let t=`/api/enrollment/auth/generateCertificate/course/${e}`,s=(await r.Z.get(t,{responseType:"blob",headers:{"Content-Type":"application/pdf"}})).data;return URL.createObjectURL(s)}catch(e){if(console.error("Error generating certificate:",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong! Uncompleted course to get certificate");throw Error(e.message||"Something went wrong! Uncompleted course to get certificate")}}},46930:(e,t,s)=>{"use strict";s.d(t,{d:()=>n,g:()=>l});var r=s(49547),o=s(15518),a=s(67682);let n=async({courseId:e,lessonId:t})=>{try{let s=await l(e),n=await (0,o.xb)(e),c=await (0,a.d7)(t),i=n.lessons.at(c.position),d=(await r.Z.get(`/api/lessons/auth/userIsCompletedLesson/${t}`)).data;return console.log("User progress: ",d),{enrollment:s,course:n,lesson:c,nextChapter:i,userProgress:d}}catch(e){if(console.error("[ACTIONS_GET_COURSE_LESSON_TO_PLAY]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},l=async e=>{try{let t=`/api/enrollment/auth/course/${e}/getEnrollmentOfUser`,s=await r.Z.get(t);return console.log("Get enrollment of user response",s.data),s.data}catch(e){return null}}},64541:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>L});var r=s(10326),o=s(15518),a=s(85072),n=s(17577),l=s(61471),c=s(7890),i=s(90748),d=s(46930),u=s(17314),g=s(77863),h=s(9015),m=s(66307),p=s(86258),w=s(35047);let y=({label:e,id:t,isCompleted:s,courseId:o,isLocked:a})=>{let n=(0,w.usePathname)(),l=(0,w.useRouter)(),c=a?s?m.Z:p.Z:h.Z,i=n?.includes(t);return r.jsx(r.Fragment,{children:(0,r.jsxs)("button",{onClick:()=>{l.push(`/course/${o}/lesson/${t}`)},type:"button",className:(0,g.cn)("flex items-center gap-x-2 text-slate-500 text-sm font-[500] pl-6 transition-all hover:text-slate-600 hover:bg-slate-300/20",i&&"text-slate-700 bg-slate-200/20 hover:bg-slate-200/20 hover:text-slate-700",s&&"text-emerald-700 hover:text-emerald-700",s&&i&&"bg-emerald-200/20"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2 py-4 text-left h-full",children:[r.jsx("div",{children:r.jsx(c,{size:22,className:(0,g.cn)("text-slate-500",i&&"text-slate-700",s&&"text-emerald-700")})}),r.jsx("div",{className:"flex-wrap",children:e})]}),r.jsx("div",{className:(0,g.cn)("ml-auto opacity-0 border-2 border-slate-700 h-full transition-all",i&&"opacity-100",s&&"border-emerald-700")})]})})};var x=s(76493),f=s(90072),S=s(37865),E=s(18766),N=s(96580),C=s(82832);let _=({price:e,course:t})=>{let[s,o]=(0,n.useState)(!1),a=async()=>{let s=await (0,x.c)(e,t);window.location.href=s};return(0,r.jsxs)(r.Fragment,{children:[r.jsx(E.Toaster,{}),(0,r.jsxs)("div",{className:"font-bold text-xl text-center mb-4",children:["Enroll now"," ",r.jsx("span",{className:"text-red-600 text-2xl",children:(0,f.T)(e)})]}),(0,r.jsxs)(S.Vv,{options:{clientId:"AdE-YdMXl7yCLKKS9iQ7Rjp-mhZia12leLr8nEIqDVzt3mtRW3Dbk_cPCMjeY_l_8jv0KuQXLWdLuQVP"},children:[(0,N.Wv)()&&r.jsx(C.j,{label:"Your student account is blocked. Please contact support."}),r.jsx(S.ch,{style:{layout:"horizontal",color:"gold",shape:"rect",height:40,tagline:!1},onClick:(0,N.Wv)()?void 0:a,onError:e=>{console.error("Error with payment: ",e),E.ZP.error("Payment failed. Please try again.")},onCancel:()=>{E.ZP.error("Payment cancelled"),console.log("Payment cancelled")},disabled:(0,N.Wv)()})]})]})};var v=s(16968);let O=()=>{let e=(0,w.useRouter)(),t=(0,w.usePathname)(),s=t?.split("/")[2],o=t?.includes("courseCertificate");return r.jsx(r.Fragment,{children:(0,r.jsxs)("button",{onClick:()=>{e.push(`/course/${s}/lesson/courseCertificate`)},type:"button",className:(0,g.cn)("flex items-center gap-x-2 text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-pink-600 text-sm font-[500] pl-6 transition-all hover:text-transparent hover:bg-clip-text hover:bg-gradient-to-r hover:from-emerald-900 hover:to-yellow-400",o&&"text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-pink-600 hover:text-transparent hover:bg-clip-text hover:bg-gradient-to-r hover:from-emerald-900 hover:to-yellow-400"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2 py-4 text-left h-full",children:[r.jsx("div",{children:r.jsx(v.Z,{size:22,className:"text-sky-800"})}),r.jsx("div",{className:"flex-wrap",children:"Congratulation! Your Certificate"})]}),r.jsx("div",{className:(0,g.cn)("ml-auto opacity-0 border-2 border-emerald-700 h-full transition-all",o&&"opacity-100")})]})})},T=({course:e,progressCount:t})=>{let[s,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),[i,g]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(async()=>{try{let t=await (0,d.g)(e.courseId);t&&t.lessonProgressList?(g(t.lessonProgressList),o(!0)):(g([]),o(!1))}catch(e){console.error("Error fetching enrollment:",e),g([]),o(!1)}})()},[e]),(0,n.useEffect)(()=>{(async()=>{c(100===await (0,a.TT)(e.courseId))})()},[e.courseId]),(0,r.jsxs)("div",{className:"h-full border-r flex flex-col overflow-y-auto shadow-sm",children:[(0,r.jsxs)("div",{className:"p-4 flex flex-col border-b",children:[r.jsx("h1",{className:"font-semibold",children:e.courseTitle}),s&&r.jsx("div",{className:"mt-10",children:r.jsx(u.Z,{variant:"success",value:t||0})}),!s&&r.jsx("div",{className:"mt-10",children:r.jsx(_,{course:e,price:e.price})})]}),l&&r.jsx(O,{}),r.jsx("div",{className:"flex flex-col w-full",children:e.lessons.sort((e,t)=>e.position-t.position).map(t=>r.jsx(y,{id:t.lessonId,label:t.lessonTitle,isCompleted:i?.find(e=>e.lessonId===t.lessonId)?.lessonStatus.toLowerCase()==="completed",courseId:e.courseId,isLocked:t.isFree||s.valueOf()},t.lessonId))})]})},j=({course:e,progressCount:t})=>(0,r.jsxs)(c.yo,{children:[r.jsx(c.aM,{className:"md:hidden pr-4 hover:opacity-75 transition",children:r.jsx(i.Z,{})}),r.jsx(c.ue,{side:"left",className:"p-0 bg-white w-72",children:r.jsx(T,{course:e,progressCount:t})})]}),I=({course:e,progressCount:t})=>(0,r.jsxs)("div",{className:"p-8 border-b h-full flex items-center bg-white shadow-sm",children:[r.jsx(j,{course:e,progressCount:t}),r.jsx(l.Z,{})]});var b=s(18713);let L=({children:e,params:t})=>{let[s,l]=(0,n.useState)(),[c,i]=(0,n.useState)(0),[d,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{},[]);let g=(0,n.useCallback)(async()=>{try{let e=await (0,o.Yt)(t.courseId);l({...e,lessons:e.lessons.filter(e=>!0===e.isPublished).map(e=>({...e,userProgress:e.lessonProgressList||null}))})}catch(e){console.error("Error fetching course:",e)}},[t]);return((0,n.useEffect)(()=>{g(),(async()=>{d?i(await (0,a.TT)(t.courseId)||0):i(0)})()},[t,g,d]),s)?r.jsx(r.Fragment,{children:(0,r.jsxs)("div",{className:"h-full",children:[r.jsx("div",{className:"h-[80px] md:pl-80 fixed top-0 left-0 right-0 z-50",children:r.jsx(I,{course:s,progressCount:c})}),r.jsx("div",{className:"hidden md:flex h-full w-80 flex-col fixed inset-y-0 z-50",children:r.jsx(T,{course:s,progressCount:c})}),r.jsx("main",{className:"md:pl-80 h-full",children:e})]})}):r.jsx(r.Fragment,{children:r.jsx("div",{className:"flex flex-col items-center justify-center h-screen",children:r.jsx(b.Z,{})})})}},18713:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(10326);function o(){return r.jsx("l-jelly",{color:"rgb(6 83 142)"})}s(17577)},82832:(e,t,s)=>{"use strict";s.d(t,{j:()=>d});var r=s(10326),o=s(50949),a=s(30361),n=s(48449),l=s(77863);let c=(0,n.j)("border text-center p-4 text-sm flex items-center w-full",{variants:{variant:{warning:"bg-yellow-200/80 border-yellow-30 text-primary",success:"bg-emerald-700 border-emerald-800 text-secondary"}},defaultVariants:{variant:"warning"}}),i={warning:o.Z,success:a.Z},d=({label:e,variant:t})=>{let s=i[t||"warning"];return(0,r.jsxs)("div",{className:(0,l.cn)(c({variant:t})),children:[r.jsx(s,{className:"h-4 w-4 mr-2"}),e]})}},17314:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var r=s(10326),o=s(77863),a=s(17577),n=s(86066);let l=(0,s(48449).j)("h-full w-full flex-1 bg-primary transition-all",{variants:{variant:{default:"bg-sky-600",success:"bg-emerald-700",warning:"bg-rose-700"}},defaultVariants:{variant:"default"}}),c=a.forwardRef(({className:e,value:t,variant:s,...a},c)=>r.jsx(n.fC,{ref:c,className:(0,o.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:r.jsx(n.z$,{className:(0,o.cn)(l({variant:s})),style:{transform:`translateX(-${100-(t||0)}%)`}})}));c.displayName=n.fC.displayName;let i={default:"text-sky-700",success:"text-emerald-700",warning:"text-rose-700"},d={default:"text-sm",sm:"text-xs"},u=({value:e,variant:t,size:s})=>(0,r.jsxs)("div",{children:[r.jsx(c,{className:"h-2",value:e,variant:t}),(0,r.jsxs)("p",{className:(0,o.cn)("font-medium mt-2 text-sky-700",i[t||"default"],d[s||"default"]),children:["warning"===t&&"Not Started. Need enroll to start.","warning"!==t&&`${Math.round(e)}% Completed`]})]})},49547:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(44099);s(95044);let o=r.Z.create({baseURL:"https://guardianshield.uk/",withCredentials:!0});o.interceptors.request.use(async e=>{let t;return t&&(e.headers.Authorization=`Bearer ${t}`),e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e));let a=o},90072:(e,t,s)=>{"use strict";s.d(t,{T:()=>r});let r=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},73586:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});var r=s(68570);let o=(0,r.createProxy)(String.raw`C:\Users\Kyrov\Desktop\CursusCourse-elearning\cursus-online-course-management-frontend\app\(home)\(routes)\course\[courseId]\layout.tsx`),{__esModule:a,$$typeof:n}=o;o.default;let l=(0,r.createProxy)(String.raw`C:\Users\Kyrov\Desktop\CursusCourse-elearning\cursus-online-course-management-frontend\app\(home)\(routes)\course\[courseId]\layout.tsx#default`)}};