(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8445],{22932:function(e,t,r){Promise.resolve().then(r.bind(r,10081))},19798:function(e,t,r){"use strict";r.d(t,{B$:function(){return c},D$:function(){return u},Kz:function(){return g},PI:function(){return f},Uf:function(){return s},V3:function(){return a},Yt:function(){return i},n6:function(){return o},tG:function(){return d},xb:function(){return l}});var n=r(1398);let s=async()=>{try{return(await n.Z.get("/api/courses/auth/getCoursesOfInstructor")).data}catch(e){return console.log("[ACTIONS_GET_COURSES_OF_INSTRUCTOR]",e),[]}},o=async e=>{try{return(await n.Z.get("/api/courses/auth/getCoursesOfInstructorById",{params:{userId:e}})).data}catch(e){return console.log("[ACTIONS_GET_COURSES_OF_INSTRUCTOR]",e),[]}},a=async()=>{try{return(await n.Z.get("/api/courses/getAllCourses")).data}catch(e){return console.log("[ACTIONS_GET_ALL_COURSES]",e),[]}},c=async(e,t)=>{try{return(await n.Z.get("/api/courses/searchCourses",{params:{title:e,categoryId:t}})).data}catch(e){return console.log("[ACTIONS_SEARCH_COURSES]",e),[]}},u=async()=>{try{return(await n.Z.get("/api/courses/getPublishedCourses")).data}catch(e){return console.log("[ACTIONS_GET_ALL_COURSES]",e),[]}},i=async e=>{try{let t=await n.Z.get("/api/courses/getCourseById/".concat(e));return console.log("Get course by id response",t.data),t.data}catch(e){if(console.log("[ACTIONS_GET_COURSE_BY_ID]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},l=async e=>{try{let t=(await n.Z.get("/api/courses/getCourseByIdByUser/".concat(e))).data;return console.log("Get course by id response",t),t}catch(e){if(console.log("[ACTIONS_GET_COURSE_BY_ID]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},d=async()=>{try{return(await n.Z.get("/api/category/getAll")).data}catch(e){return console.log("[ACTIONS_GET_ALL_CATEGORIES]",e),[]}},g=async()=>{try{return(await n.Z.get("/api/courses/auth/getStudentOwnedCourses")).data}catch(e){return console.log("[ACTIONS_GET_STUDENT_OWN_COURSES]",e),[]}},f=async e=>{try{return(await n.Z.get("/api/courses/auth/getStudentOwnedCourseWithLessonsAndProgressById/".concat(e))).data}catch(e){return console.log("[ACTIONS_GET_STUDENT_OWN_COURSE_BY_ID]",e),null}}},63067:function(e,t,r){"use strict";r.d(t,{ES:function(){return o},TT:function(){return s},W3:function(){return c},ob:function(){return a}});var n=r(1398);let s=async e=>{try{return(await n.Z.get("/api/lessonProgress/auth/getProgressCount/".concat(e))).data}catch(e){return console.log("[ACTIONS_GET_PROGRESS_COUNT]",e),0}},o=async(e,t)=>{try{let r="/api/lessonProgress/auth/course/".concat(e,"/lesson/").concat(t,"/completed"),s=await n.Z.post(r);return console.log("[ACTIONS_COMPLETED_LESSON]",s.data),s.data}catch(e){if(console.log("[ACTIONS_COMPLETED_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong! Completed lesson failed");throw Error(e.message||"Something went wrong! Completed lesson failed")}},a=async(e,t)=>{try{let r="/api/lessonProgress/auth/course/".concat(e,"/lesson/").concat(t,"/uncompleted"),s=await n.Z.patch(r);return console.log("[ACTIONS_UNCOMPLETED_LESSON]",s.data),s.data}catch(e){if(console.log("[ACTIONS_UNCOMPLETED_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong! Uncompleted lesson failed");throw Error(e.message||"Something went wrong! Uncompleted lesson failed")}},c=async e=>{try{let t=(await n.Z.get("/api/enrollment/auth/generateCertificate/course/".concat(e),{responseType:"blob",headers:{"Content-Type":"application/pdf"}})).data;return URL.createObjectURL(t)}catch(e){if(console.error("Error generating certificate:",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong! Uncompleted course to get certificate");throw Error(e.message||"Something went wrong! Uncompleted course to get certificate")}}},10081:function(e,t,r){"use strict";r.r(t);var n=r(57437),s=r(19798),o=r(63067),a=r(40840),c=r(16463),u=r(2265);t.default=e=>{let{params:t}=e,[r,i]=(0,u.useState)(),[l,d]=(0,u.useState)(0),[g,f]=(0,u.useState)(!1),[h,S]=(0,u.useState)();if((0,u.useEffect)(()=>{localStorage.getItem("userData")&&f(!0)},[]),(0,u.useEffect)(()=>{async function e(){let e=await (0,o.TT)(t.courseId);d(e||0),S(e)}async function r(){try{if(g&&!h){let e=await (0,s.PI)(t.courseId);i(e)}else{let e=await (0,s.xb)(t.courseId);i(e)}}catch(e){console.error("Error fetching course:",e)}}(async function(){await e(),await r()})()},[t,g,h]),!r)return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"flex flex-col items-center justify-center h-screen",children:(0,n.jsx)(a.Z,{})})});if(r&&r.lessons&&r.lessons.length>0){let e=r.lessons.find(e=>e.lessonProgressList.find(e=>"completed"!==e.lessonStatus.toLowerCase()));return e?(0,c.redirect)("/course/".concat(r.courseId,"/lesson/").concat(e.lessonId)):100===l?(0,c.redirect)("/course/".concat(r.courseId,"/lesson/courseCertificate")):(0,c.redirect)("/course/".concat(r.courseId,"/lesson/").concat(r.lessons[0].lessonId))}return console.error("Invalid course or lessons data:",r),null}},40840:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(57437),s=r(2265);function o(){return(0,s.useEffect)(()=>{(async function(){let{jelly:e}=await r.e(1916).then(r.bind(r,31916));e.register()})()},[]),(0,n.jsx)("l-jelly",{color:"rgb(6 83 142)"})}},1398:function(e,t,r){"use strict";var n=r(38472),s=r(7561);let o=n.Z.create({baseURL:"https://guardianshield.uk/",withCredentials:!0});o.interceptors.request.use(async e=>{let t;return console.log("Client side cookies: ",t=s.Z.get("jwtToken")),t&&(e.headers.Authorization="Bearer ".concat(t)),e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e)),t.Z=o},16463:function(e,t,r){"use strict";var n=r(71169);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[5508,2971,7023,1744],function(){return e(e.s=22932)}),_N_E=e.O()}]);