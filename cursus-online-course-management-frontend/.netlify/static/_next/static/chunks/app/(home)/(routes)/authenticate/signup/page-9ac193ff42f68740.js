(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5617],{68981:function(e,t,s){Promise.resolve().then(s.bind(s,95956))},95956:function(e,t,s){"use strict";s.r(t);var a=s(57437),n=s(15221),r=s(16463),i=s(69022),o=s(12603),l=s(10209),c=s(5356),u=s(7059),m=s(8407),d=s(2265),g=s(16683),h=s(7561),x=s(4002),p=s(42803);let f=o.Ry({email:o.Z_().min(1,{message:"Email is required"}).email("Invalid email address").regex(/^\S+$/,{message:"Email should not contain spaces or tabs"}),password:o.Z_().min(8,{message:"Password must be at least 8 characters"}).regex(/[A-Z]/,{message:"Password must contain at least one uppercase letter"}).regex(/[a-z]/,{message:"Password must contain at least one lowercase letter"}).regex(/\d/,{message:"Password must contain at least one number"}).regex(/[!@#$%^&*(),.?":{}|<>]/,{message:"Password must contain at least one special character"}).regex(/^\S+$/,{message:"Password should not contain spaces or tabs"}),phone:o.Z_().min(10,{message:"Phone number must be exactly 10 digits"}).regex(/^\d+$/,{message:"Invalid phone number"}).max(10,{message:"Phone number must be exactly 10 digits"}).regex(/^0\d{9,10}$/,{message:"Phone number must be a valid Vietnamese number starting with 0 and containing only digits"}).optional(),fullName:o.Z_().min(1,{message:"Full name is required"}).max(50,{message:"Full name can have a maximum of 50 characters"}).optional()});t.default=()=>{let e=(0,r.useRouter)(),[t,s]=(0,d.useState)(!1),o=(0,d.useRef)(null),[b,w]=(0,d.useState)(5),[v,y]=(0,d.useState)(!1);(0,i.cI)({resolver:(0,n.F)(f),defaultValues:{email:"",password:"",phone:"",fullName:""}});let j=async e=>{try{console.log(e);let t=await (0,p.y1)(e);console.log("Sign up response: ",t),h.Z.set("jwtToken",t.data.token,{expires:1}),h.Z.set("refreshToken",t.data.refreshToken,{expires:7});let a=await (0,x.ZP)();console.log("User Data Sign Up",a),localStorage.setItem("userData",JSON.stringify(a)),l.ZP.success("Your account has been created"),s(!0),y(!0)}catch(e){l.ZP.error(String(e.response.data)||"Something went wrong")}};(0,d.useEffect)(()=>{if(!0==t){o.current=setTimeout(()=>{e.push("/")},5e3);let t=setInterval(()=>{w(e=>e-1)},1e3);return()=>{o.current&&clearTimeout(o.current),clearInterval(t)}}},[t,e]);let N=async()=>{try{console.log("Initiating Google sign-in popup...");let t=await (0,m.TX)(),s=t.user,a=await s.getIdToken();console.log("Google Sign-In Result:",t);let n=await (0,p.Cb)(a);h.Z.set("jwtToken",n.token,{expires:1}),h.Z.set("refreshToken",n.refreshToken,{expires:7});let r=await (0,x.ZP)();console.log("User Data:",r),localStorage.setItem("userData",JSON.stringify(r)),e.push("/")}catch(e){console.error("Error during Google sign-in with popup:",e),l.ZP.error("Fail to login with Google")}};return(0,a.jsx)(a.Fragment,{children:v?(0,a.jsx)("div",{className:"fixed inset-0 top-0 left-0 right-0 bottom-0 bg-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"relative flex flex-col",children:[(0,a.jsx)("h1",{className:"text-center text-2xl pt-10",children:"Thank you for registering!!"}),(0,a.jsx)("p",{className:"text-center text-base text-slate-600",children:"Please check your email to verify your account."}),(0,a.jsxs)("p",{className:"mb-4 text-center text-gray-600",children:["You will be redirected to the home page in"," ",(0,a.jsx)("span",{className:"font-semibold text-gray-800",children:b})," ","seconds..."]})]})}):(0,a.jsxs)("div",{className:"container relative h-screen flex-col items-center justify-center md:grid lg:max-w-none lg:grid-cols-2 lg:px-0",children:[(0,a.jsx)("a",{href:"/authenticate/login",className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1   focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2 absolute right-4 top-4 md:right-8 md:top-8",children:"Login"}),(0,a.jsx)("div",{className:"relative hidden h-full flex-col bg-muted text-white lg:flex dark:border-r",children:(0,a.jsx)(c.lr,{plugins:[(0,u.Z)({delay:6e3})],children:(0,a.jsxs)(c.KI,{children:[(0,a.jsx)(c.d$,{}),(0,a.jsx)(c.d$,{})]})})}),(0,a.jsxs)("div",{className:"lg:p-8",children:[(0,a.jsx)("h1",{className:"text-2xl pt-10",children:"Create Account"}),(0,a.jsx)("div",{className:"text-sm text-slate-600",children:"Enter your information into required fields below to create"}),(0,a.jsx)(g.Z,{type:"signup",onSubmit:j,handleGoogleSignIn:N})]})]})})}}},function(e){e.O(0,[9208,680,5508,6018,209,5192,8355,4865,3114,4906,2971,7023,1744],function(){return e(e.s=68981)}),_N_E=e.O()}]);