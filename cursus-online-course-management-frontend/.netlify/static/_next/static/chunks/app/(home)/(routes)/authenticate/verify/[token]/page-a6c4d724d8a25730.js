(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{1092:function(e,t,r){Promise.resolve().then(r.bind(r,55770))},42803:function(e,t,r){"use strict";r.d(t,{Cb:function(){return a},Q3:function(){return o},c0:function(){return c},gF:function(){return l},x4:function(){return s},y1:function(){return i}});var n=r(1398);let o=async e=>{try{return await n.Z.get("/api/verifyEmailByToken/".concat(e))}catch(e){if(console.log("[ACTIONS_VERIFY_EMAIL]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},s=async e=>{try{return(await n.Z.post("/api/auth/login",e)).data}catch(e){if(console.log("[ACTIONS_LOGIN]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},a=async e=>{try{console.log("Token: ",e);let t=await n.Z.post("/api/auth/loginWithGoogle",{access_token:e});return console.log("Backend response:",t.data),t.data}catch(e){if(console.log("[ACTIONS_LOGIN_WITH_GOOGLE]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Login with Google fail!");throw Error(e.message||"Login with Google fail!")}},i=async e=>{try{return await n.Z.post("/api/auth/register",e)}catch(e){if(console.log("API_USER_AUTHENTICATE_SIGN_UP",e),e.response&&e.response.data)throw Error(e.response.data.message||"Signup fail!");throw Error(e.message||"Signup fail!")}},l=async e=>{try{return(await n.Z.get("/api/auth/forgotPassword/".concat(e))).data}catch(e){return console.error("[ACTIONS_FORGOT_PASSWORD]",e),null}},c=async e=>{try{return(await n.Z.post("/api/auth/resetPassword",e)).data}catch(e){return console.error("[ACTIONS_RESET_PASSWORD]",e),null}}},4002:function(e,t,r){"use strict";r.d(t,{Cp:function(){return i},Nq:function(){return a},PR:function(){return s},zP:function(){return l}});var n=r(1398);let o=async()=>{try{return(await n.Z.get("/api/user/auth/getFullUserDetails")).data}catch(e){return console.error("[ACTIONS_GET_FULL_USER_DETAILS]",e),null}};t.ZP=o;let s=async()=>{try{return(await n.Z.get("/api/user/auth/getUser")).data}catch(e){return console.error("[ACTIONS_GET_USER]",e),null}},a=async e=>{try{return(await n.Z.put("/api/user/auth/updateUser",e)).data}catch(e){if(console.error("[ACTIONS_UPDATE_USER]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},i=async e=>{try{return(await n.Z.patch("/api/user/auth/changePassword",e)).data}catch(e){if(console.error("[ACTIONS_CHANGE_PASSWORD]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},l=async e=>{try{return(await n.Z.put("/api/user/auth/registerBecomeInstructor",e)).data}catch(e){if(console.error("[ACTIONS_REGISTER_BECOME_INSTRUCTOR]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}}},55770:function(e,t,r){"use strict";r.r(t);var n=r(57437),o=r(42803),s=r(50495),a=r(16463),i=r(2265),l=r(7561),c=r(4002);t.default=e=>{let{params:t}=e,r=(0,a.useRouter)(),u=(0,i.useRef)(null),[d,f]=(0,i.useState)(5),[g,h]=(0,i.useState)(!0),[p,m]=(0,i.useState)(null),[w,y]=(0,i.useState)(!1),[x,v]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{(async()=>{try{let e=l.Z.get("jwtToken");e?console.log("Token exists:"):(e=t.token,console.log("Token does not exist"));let r=await (0,o.Q3)(e);y(!0),v(!0),h(!1);try{y(!0),v(!0),h(!1),l.Z.set("jwtToken",r.data.token,{expires:1});let e=await (0,c.ZP)();console.log("User Data Sign Up",e),localStorage.setItem("userData",JSON.stringify(e))}catch(e){console.error("Get Full User Details failed:",e.message),m("Get Full User Details failed:"+String(e.message))}}catch(e){console.log("Verification failed",e),e.response&&e.response.data?m(String(e.response.data)||"Something went wrong"):m(String(e.message)||"Something went wrong"),h(!1),v(!0)}})()},[t.token,r]),(0,i.useEffect)(()=>{if(!0==x){u.current=setTimeout(()=>{"You need to login again because you are expired your access."==p?r.push("/authenticate/login"):r.push("/")},5e3);let e=setInterval(()=>{f(e=>e-1)},1e3);return()=>{u.current&&clearTimeout(u.current),clearInterval(e)}}},[x,p,r]),(0,n.jsx)("div",{className:"fixed flex inset-0 top-0 left-0 right-0 bottom-0 items-center justify-center bg-gradient",children:(0,n.jsxs)("div",{className:"z-10 flex flex-col relative bg-white p-8 rounded-lg shadow-lg transform transition duration-500 hover:scale-105",children:[p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"text-3xl font-bold mb-4 text-center text-green-600",children:"Email Verified Successfully!"}),(0,n.jsxs)("h3",{className:"text-3xl font-bold mb-4 text-center text-black",children:["But!!! ",p]}),(0,n.jsxs)("p",{className:"mb-4 text-center text-gray-600",children:["You will be redirected to the next page in"," ",(0,n.jsx)("span",{className:"font-semibold text-gray-800",children:d})," ","seconds..."]})]}),g&&(0,n.jsx)("p",{className:"mb-4 text-center text-gray-600",children:"Loading..."}),!p&&w&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"text-3xl font-bold mb-4 text-center  text-green-600",children:"Email Verified Successfully!"}),(0,n.jsxs)("p",{className:"mb-4 text-center text-gray-600",children:["You will be redirected to the home page in"," ",(0,n.jsx)("span",{className:"font-semibold text-gray-800",children:d})," ","seconds..."]}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(s.z,{onClick:()=>{u.current&&clearTimeout(u.current),r.push("/")},disabled:g,children:"Go to Home"})})]})]})})}},50495:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var n=r(57437),o=r(2265),s=r(13350),a=r(73969),i=r(37440);let l=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white hover:bg-emerald-600/80"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,t)=>{let{className:r,variant:o,size:a,asChild:c=!1,...u}=e,d=c?s.g7:"button";return(0,n.jsx)(d,{className:(0,i.cn)(l({variant:o,size:a,className:r})),ref:t,...u})});c.displayName="Button"},1398:function(e,t,r){"use strict";var n=r(38472),o=r(7561);let s=n.Z.create({baseURL:"https://guardianshield.uk/",withCredentials:!0});s.interceptors.request.use(async e=>{let t;return console.log("Client side cookies: ",t=o.Z.get("jwtToken")),t&&(e.headers.Authorization="Bearer ".concat(t)),e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e)),t.Z=s},37440:function(e,t,r){"use strict";r.d(t,{cn:function(){return a},h:function(){return i}});var n=r(98591),o=r(61362),s=r(24516);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}let i=e=>{let t=new Date(e),r=t.getTimezoneOffset();return console.log("Offset:",r),t.setMinutes(t.getMinutes()-r),console.log("Date:",t),(0,o.Q)(t,{addSuffix:!0})}},55206:function(e,t,r){"use strict";r.d(t,{F:function(){return o},e:function(){return s}});var n=r(2265);function o(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}function s(...e){return n.useCallback(o(...e),e)}},13350:function(e,t,r){"use strict";r.d(t,{A4:function(){return l},g7:function(){return a}});var n=r(2265),o=r(55206),s=r(57437),a=n.forwardRef((e,t)=>{let{children:r,...o}=e,a=n.Children.toArray(r),l=a.find(c);if(l){let e=l.props.children,r=a.map(t=>t!==l?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,s.jsx)(i,{...o,ref:t,children:n.isValidElement(e)?n.cloneElement(e,void 0,r):null})}return(0,s.jsx)(i,{...o,ref:t,children:r})});a.displayName="Slot";var i=n.forwardRef((e,t)=>{let{children:r,...s}=e;if(n.isValidElement(r)){let e,a;let i=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref;return n.cloneElement(r,{...function(e,t){let r={...t};for(let n in t){let o=e[n],s=t[n];/^on[A-Z]/.test(n)?o&&s?r[n]=(...e)=>{s(...e),o(...e)}:o&&(r[n]=o):"style"===n?r[n]={...o,...s}:"className"===n&&(r[n]=[o,s].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props),ref:t?(0,o.F)(t,i):i})}return n.Children.count(r)>1?n.Children.only(null):null});i.displayName="SlotClone";var l=({children:e})=>(0,s.jsx)(s.Fragment,{children:e});function c(e){return n.isValidElement(e)&&e.type===l}},73969:function(e,t,r){"use strict";r.d(t,{j:function(){return s}});let n=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,o=function(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=function e(t){var r,n,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t){if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(n=e(t[r]))&&(o&&(o+=" "),o+=n);else for(r in t)t[r]&&(o&&(o+=" "),o+=r)}return o}(e))&&(n&&(n+=" "),n+=t);return n},s=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return o(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:a,defaultVariants:i}=t,l=Object.keys(a).map(e=>{let t=null==r?void 0:r[e],o=null==i?void 0:i[e];if(null===t)return null;let s=n(t)||n(o);return a[e][s]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return o(e,l,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:r,className:n,...o}=t;return Object.entries(o).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...c}[t]):({...i,...c})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},16463:function(e,t,r){"use strict";var n=r(71169);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[5508,6018,2971,7023,1744],function(){return e(e.s=1092)}),_N_E=e.O()}]);