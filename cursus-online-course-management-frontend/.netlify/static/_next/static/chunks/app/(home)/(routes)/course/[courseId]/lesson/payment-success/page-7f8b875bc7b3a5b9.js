(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6696],{64589:function(e,t,r){Promise.resolve().then(r.bind(r,22770))},37428:function(e,t,r){"use strict";r.d(t,{c:function(){return o},h:function(){return s}});var n=r(1398);let o=async(e,t)=>{try{let r="https://www.cursusmate.online",o=await n.Z.post("/api/payment/auth/createEnrollRequestPayment",{amount:e,currency:"USD",description:"Course enrollment for course title ".concat(t.courseTitle),method:"paypal",cancelUrl:"".concat(r,"/course/").concat(t.courseId,"/lesson"),returnUrl:"".concat(r,"/course/").concat(t.courseId,"/lesson/payment-success"),payeeId:"sb-w3nfo30755669@gmail.com"});return console.log("[ACTIONS_ENROLL_PAYMENT] createEnrollPayment response: ",o.data),o.data}catch(e){if(console.error("[ACTIONS_ENROLL_PAYMENT]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},s=async(e,t,r)=>{try{console.log("[ACTIONS_ENROLL_PAYMENT] executeEnrollPayment: ",e,t);let o=await n.Z.post("/api/payment/auth/executeEnrollRequestPayment",{paymentId:e,payerId:t,courseId:r});return console.log("[ACTIONS_ENROLL_PAYMENT] executeEnrollPayment response: ",o.data),o.data}catch(e){if(console.error("[ACTIONS_ENROLL_PAYMENT]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}}},22770:function(e,t,r){"use strict";r.r(t);var n=r(37428),o=r(16463),s=r(2265);t.default=e=>{let{params:t}=e;(0,o.useRouter)();let r=(0,o.useSearchParams)(),a=r.get("paymentId"),c=r.get("PayerID");(0,s.useEffect)(()=>{!async function(){if(!a||!c){console.error("Payment ID or Payer ID missing");return}await (0,n.h)(a,c,t.courseId)&&(window.location.href="/course/".concat(t.courseId))}()},[a,c,t.courseId])}},1398:function(e,t,r){"use strict";var n=r(38472),o=r(7561);let s=n.Z.create({baseURL:"https://guardianshield.uk/",withCredentials:!0});s.interceptors.request.use(async e=>{let t;return console.log("Client side cookies: ",t=o.Z.get("jwtToken")),t&&(e.headers.Authorization="Bearer ".concat(t)),e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e)),t.Z=s},16463:function(e,t,r){"use strict";var n=r(71169);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[5508,2971,7023,1744],function(){return e(e.s=64589)}),_N_E=e.O()}]);