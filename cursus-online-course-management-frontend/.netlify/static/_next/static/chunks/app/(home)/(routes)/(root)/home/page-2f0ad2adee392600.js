(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6140],{15405:function(e,t,r){Promise.resolve().then(r.bind(r,6315))},19798:function(e,t,r){"use strict";r.d(t,{B$:function(){return l},D$:function(){return c},Kz:function(){return f},PI:function(){return g},Uf:function(){return n},V3:function(){return o},Yt:function(){return i},n6:function(){return a},tG:function(){return d},xb:function(){return u}});var s=r(1398);let n=async()=>{try{return(await s.Z.get("/api/courses/auth/getCoursesOfInstructor")).data}catch(e){return console.log("[ACTIONS_GET_COURSES_OF_INSTRUCTOR]",e),[]}},a=async e=>{try{return(await s.Z.get("/api/courses/auth/getCoursesOfInstructorById",{params:{userId:e}})).data}catch(e){return console.log("[ACTIONS_GET_COURSES_OF_INSTRUCTOR]",e),[]}},o=async()=>{try{return(await s.Z.get("/api/courses/getAllCourses")).data}catch(e){return console.log("[ACTIONS_GET_ALL_COURSES]",e),[]}},l=async(e,t)=>{try{return(await s.Z.get("/api/courses/searchCourses",{params:{title:e,categoryId:t}})).data}catch(e){return console.log("[ACTIONS_SEARCH_COURSES]",e),[]}},c=async()=>{try{return(await s.Z.get("/api/courses/getPublishedCourses")).data}catch(e){return console.log("[ACTIONS_GET_ALL_COURSES]",e),[]}},i=async e=>{try{let t=await s.Z.get("/api/courses/getCourseById/".concat(e));return console.log("Get course by id response",t.data),t.data}catch(e){if(console.log("[ACTIONS_GET_COURSE_BY_ID]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},u=async e=>{try{let t=(await s.Z.get("/api/courses/getCourseByIdByUser/".concat(e))).data;return console.log("Get course by id response",t),t}catch(e){if(console.log("[ACTIONS_GET_COURSE_BY_ID]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},d=async()=>{try{return(await s.Z.get("/api/category/getAll")).data}catch(e){return console.log("[ACTIONS_GET_ALL_CATEGORIES]",e),[]}},f=async()=>{try{return(await s.Z.get("/api/courses/auth/getStudentOwnedCourses")).data}catch(e){return console.log("[ACTIONS_GET_STUDENT_OWN_COURSES]",e),[]}},g=async e=>{try{return(await s.Z.get("/api/courses/auth/getStudentOwnedCourseWithLessonsAndProgressById/".concat(e))).data}catch(e){return console.log("[ACTIONS_GET_STUDENT_OWN_COURSE_BY_ID]",e),null}}},6315:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var s=r(57437),n=r(12491),a=r(37440),o=r(16463),l=r(94834),c=e=>{let{label:t,value:r,icon:c}=e,i=(0,o.usePathname)(),u=(0,o.useRouter)(),d=(0,o.useSearchParams)(),f=d.get("categoryId"),g=d.get("title"),h=f===r;return(0,s.jsxs)("button",{onClick:()=>{let e=n.Z.stringifyUrl({url:i,query:{title:g,categoryId:h?null:r}},{skipNull:!0,skipEmptyString:!0});u.push(e)},className:(0,a.cn)("py-2 px-3 text-sm border border-slate-200 rounded-full flex items-center gap-x-1 hover:border-sky-700 transition",h&&"border-sky-700 bg-sky-200/20 text-sky-800"),type:"button",children:[c&&(0,s.jsx)(l.dy,{size:20,unified:c}),(0,s.jsx)("div",{className:"truncate",children:t})]})},i=e=>{let{items:t}=e;return(0,s.jsx)("div",{className:"flex items-center gap-x-2 overflow-auto pb-2",children:t.map(e=>(0,s.jsx)(c,{label:e.categoryName,icon:e.categoryIcon,value:e.categoryId},e.categoryId))})},u=r(2265),d=r(66648),f=r(87138),g=r(88052),h=r(58948),m=r(77003),x=r(1988),p=e=>{let{id:t,title:r,imageUrl:n,chaptersLength:a,price:o,category:l,progress:c}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(f.default,{href:"/course/".concat(t),children:(0,s.jsxs)("div",{className:"group hover:shadow-sm transition overflow-hidden border rounded-lg p-3 h-full",children:[(0,s.jsx)("div",{className:"relative w-full aspect-video rounded-md overflow-hidden",children:(0,s.jsx)(d.default,{fill:!0,className:"object-cover",alt:r,src:n||"/default-thumbnail.jpg"})}),(0,s.jsxs)("div",{className:"flex flex-col pt-2",children:[(0,s.jsx)("div",{className:"text-lg md:text-base font-medium group-hover:text-sky-700 transition line-clamp-2",children:r}),(0,s.jsx)("div",{className:"my-3 flex items-center gap-x-2 text-sm md:text-xs",children:(0,s.jsxs)("div",{className:"flex items-center gap-x-1 text-slate-500",children:[(0,s.jsx)(g.I,{size:"sm",icon:h.Z}),(0,s.jsxs)("span",{children:[a," ",1===a?"Chapter":"Chapters"]})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-sm text-slate-500",children:l}),(0,s.jsx)("div",{className:"text-sm font-medium text-sky-700",children:null!=c?(0,s.jsx)("div",{children:(0,s.jsx)(x.Z,{size:"sm",value:c,variant:100===c?"success":"default"})}):(0,s.jsx)("p",{className:"text-md md:text-sm font-medium text-slate-700",children:(0,m.T)(o)})})]})]})]})})})},y=r(19798),v=r(7561),w=e=>{let{items:t}=e,[r,n]=(0,u.useState)([]);return(0,u.useEffect)(()=>{v.Z.get("jwtToken")&&(async()=>{let e=await (0,y.Kz)();console.log("Owned courses",e),n(e)})()},[t]),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-4 gap-4",children:t.map(e=>{var t,n,a,o;return(0,s.jsx)(p,{id:e.courseId,title:e.courseTitle,imageUrl:e.thumbnailUrl,chaptersLength:null===(t=e.lessons)||void 0===t?void 0:t.filter(e=>e.isPublished).length,price:e.price,category:null==e?void 0:null===(n=e.category)||void 0===n?void 0:n.categoryName,progress:null!==(o=null===(a=r.find(t=>t.courseId===e.courseId))||void 0===a?void 0:a.userCourseProgress)&&void 0!==o?o:null},e.courseId)})}),0===t.length&&(0,s.jsx)("div",{className:"text-center text-sm text-muted-foreground mt-10",children:"No course found!"})]})};let S=e=>{for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e};var j=r(80115),N=r(99228),T=r(40840);let E=()=>{var e;let[t,r]=(0,u.useState)([]),[n,a]=(0,u.useState)([]),l=v.Z.get("jwtToken"),c=(0,o.useSearchParams)(),d=null!==(e=c.get("categoryId"))&&void 0!==e?e:"",f=c.get("title")||"";return(0,u.useEffect)(()=>{(async()=>{try{let e=(await (0,y.tG)()).map(e=>({...e,categoryId:e.categoryId.toString()}));r(e)}catch(e){console.error("Error fetching categories:",e)}})()},[]),(0,u.useEffect)(()=>{(async()=>{f||d?a(await (0,y.B$)(f,d)):a(S(await (0,y.D$)()))})()},[d,c,f]),l&&(0,j.j)(),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"px-6 pt-6 md:hidden md:mb-0 block",children:(0,s.jsx)(N.Z,{})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsx)(i,{items:t}),(0,s.jsx)(w,{items:n})]})]})};var b=()=>(0,s.jsx)(u.Suspense,{fallback:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-screen",children:(0,s.jsx)(T.Z,{})}),children:(0,s.jsx)(E,{})})},40840:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(57437),n=r(2265);function a(){return(0,n.useEffect)(()=>{(async function(){let{jelly:e}=await r.e(1916).then(r.bind(r,31916));e.register()})()},[]),(0,s.jsx)("l-jelly",{color:"rgb(6 83 142)"})}},1988:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var s=r(57437),n=r(37440),a=r(2265),o=r(45301);let l=(0,r(73969).j)("h-full w-full flex-1 bg-primary transition-all",{variants:{variant:{default:"bg-sky-600",success:"bg-emerald-700",warning:"bg-rose-700"}},defaultVariants:{variant:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,value:a,variant:c,...i}=e;return(0,s.jsx)(o.fC,{ref:t,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...i,children:(0,s.jsx)(o.z$,{className:(0,n.cn)(l({variant:c})),style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});c.displayName=o.fC.displayName;let i={default:"text-sky-700",success:"text-emerald-700",warning:"text-rose-700"},u={default:"text-sm",sm:"text-xs"};var d=e=>{let{value:t,variant:r,size:a}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)(c,{className:"h-2",value:t,variant:r}),(0,s.jsxs)("p",{className:(0,n.cn)("font-medium mt-2 text-sky-700",i[r||"default"],u[a||"default"]),children:["warning"===r&&"Not Started. Need enroll to start.","warning"!==r&&"".concat(Math.round(t),"% Completed")]})]})}},88052:function(e,t,r){"use strict";r.d(t,{I:function(){return c}});var s=r(57437),n=r(73969),a=r(37440);let o=(0,n.j)("rounded-full flex items-center justify-center",{variants:{variant:{default:"bg-sky-100",success:"bg-emerald-100"},size:{default:"p-2",sm:"p-1"}},defaultVariants:{variant:"default",size:"default"}}),l=(0,n.j)("",{variants:{variant:{default:"text-sky-700",success:"text-emerald-700"},size:{default:"h-8 w-8",sm:"h-4 w-4"}},defaultVariants:{variant:"default",size:"default"}}),c=e=>{let{icon:t,variant:r,size:n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(o({variant:r,size:n})),children:(0,s.jsx)(t,{className:(0,a.cn)(l({variant:r,size:n}))})})}},99228:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var s=r(57437),n=r(2265),a=r(12491),o=r(54817),l=r(83102),c=r(16463);let i=e=>{let{debouncedValue:t,pathname:r,router:s}=e,o=(0,c.useSearchParams)().get("categoryId");return(0,n.useEffect)(()=>{let e=a.Z.stringifyUrl({url:r,query:{categoryId:o,title:t}},{skipEmptyString:!0,skipNull:!0});s.push(e)},[t,o,s,r]),null};var u=()=>{let[e,t]=(0,n.useState)(""),r=function(e,t){let[r,s]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let t=setTimeout(()=>{s(e)},500);return()=>{clearTimeout(t)}},[e,void 0]),r}(e),a=(0,c.useRouter)(),u=(0,c.usePathname)();return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 absolute top-3 left-3 text-slate-600"}),(0,s.jsx)(l.I,{onChange:e=>t(e.target.value),value:e,className:"w-full md:w-[300px] pl-9 rounded-full bg-slate-100 focus-visible:ring-slate-200",placeholder:"Search for course"}),(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(i,{debouncedValue:r,pathname:u,router:a})})]})}},83102:function(e,t,r){"use strict";r.d(t,{I:function(){return o}});var s=r(57437),n=r(2265),a=r(37440);let o=n.forwardRef((e,t)=>{let{className:r,type:n,value:o,...l}=e;return(0,s.jsx)("input",{type:n,value:o||"",className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});o.displayName="Input"},1398:function(e,t,r){"use strict";var s=r(38472),n=r(7561);let a=s.Z.create({baseURL:"https://guardianshield.uk/",withCredentials:!0});a.interceptors.request.use(async e=>{let t;return console.log("Client side cookies: ",t=n.Z.get("jwtToken")),t&&(e.headers.Authorization="Bearer ".concat(t)),e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e)),t.Z=a},77003:function(e,t,r){"use strict";r.d(t,{T:function(){return s}});let s=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},80115:function(e,t,r){"use strict";r.d(t,{j:function(){return i}});var s=r(7561),n=r(10209),a=r(1398);let o=async e=>{try{return await a.Z.get("/api/auth/verifyToken?token="+e),console.log("[ACTIONS_IS_TOKEN_EXPIRED] Token is valid"),!1}catch(e){return console.log("[ACTIONS_IS_TOKEN_EXPIRED]",e),!0}},l=async e=>{let{accessToken:t,refreshToken:r}=e;try{console.log("[ACTIONS_GET_REFRESH_TOKEN] Requesting refresh token: accessToken",t,"refreshToken",r);let e=await a.Z.post("/api/auth/refreshToken",{accessToken:t,refreshToken:r});return console.log("[ACTIONS_GET_REFRESH_TOKEN] Refresh token response: ",e.data),e.data}catch(e){if(console.error("[ACTIONS_GET_REFRESH_TOKEN]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},c=()=>{localStorage.removeItem("userData"),s.Z.remove("jwtToken"),s.Z.remove("refreshToken"),n.ZP.error("Session expired. Please login again"),window.location.href="/authenticate/login"},i=async()=>{let e=s.Z.get("jwtToken"),t=s.Z.get("refreshToken");if(!e||!t)return c(),!1;if(await o(e)===!0)try{let r=await l({accessToken:e,refreshToken:t});console.log("Refresh token response: ",r),s.Z.set("jwtToken",r.token),s.Z.set("refreshToken",r.refreshToken)}catch(e){return u(e),c(),!1}return!0},u=e=>{if(e.response)switch(e.response.status){case 403:n.ZP.error("You do not have permission to access this resource.");break;case 401:n.ZP.error("Session expired. Please login again.");break;case 500:n.ZP.error("Server error. Please try again later.");break;default:n.ZP.error("An error occurred. Please try again.")}else n.ZP.error("Network error. Please check your connection.")}},37440:function(e,t,r){"use strict";r.d(t,{cn:function(){return o},h:function(){return l}});var s=r(98591),n=r(61362),a=r(24516);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}let l=e=>{let t=new Date(e),r=t.getTimezoneOffset();return console.log("Offset:",r),t.setMinutes(t.getMinutes()-r),console.log("Date:",t),(0,n.Q)(t,{addSuffix:!0})}}},function(e){e.O(0,[4560,5508,6018,209,7138,6648,2963,2971,7023,1744],function(){return e(e.s=15405)}),_N_E=e.O()}]);