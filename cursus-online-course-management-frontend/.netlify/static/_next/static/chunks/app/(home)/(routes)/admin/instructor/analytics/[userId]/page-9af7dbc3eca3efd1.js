(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1363],{48780:function(e,t,r){Promise.resolve().then(r.bind(r,58893))},58893:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return B}});var a=r(57437),s=r(16463),n=r(36013),l=r(46294),i=r(77003),c=r(2265),o=e=>{let{value:t,label:r,shouldFormat:s,onSelectChange:o}=e,[d,u]=(0,c.useState)(1);return(0,c.useEffect)(()=>{1!==d&&o(d)},[d,o]),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsxs)(n.ll,{className:"text-sm font-medium",children:[r," of last ",d," ",d>1?"months":"month"]}),(0,a.jsxs)(l.Ph,{onValueChange:e=>u(parseInt(e)),children:[(0,a.jsx)(l.i4,{className:"w-fit",children:(0,a.jsx)(l.ki,{})}),(0,a.jsx)(l.Bw,{children:(0,a.jsxs)(l.DI,{children:[(0,a.jsx)(l.n5,{children:r}),(0,a.jsx)(l.Ql,{value:"1",children:"Last 1 month"}),(0,a.jsx)(l.Ql,{value:"3",children:"Last 3 months"}),(0,a.jsx)(l.Ql,{value:"6",children:"Last 6 months"}),(0,a.jsx)(l.Ql,{value:"9",children:"Last 9 months"}),(0,a.jsx)(l.Ql,{value:"12",children:"Last 1 year"})]})})]})]}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:s?(0,i.T)(t):t})})]})},d=r(1398);let u=async(e,t,r)=>{try{let a=await h(e),s=await x(e),n=await m(e,r),l=await f(e,t);return{pieChartData:a,composedChartData:s,totalRevenue:l,totalSales:n}}catch(e){return console.log("[ACTION_GET_ANALYTICS]",e),{pieChartData:[],composedChartData:[],totalRevenue:0,totalSales:0}}},f=async(e,t)=>{try{return(await d.Z.get("/api/instructor/statistic/quarterlyRevenue",{params:{userId:e,quarter:t}})).data}catch(e){return console.error("[ACTIONS_GET_TOTAL_REVENUE]",e),0}},m=async(e,t)=>{try{return(await d.Z.get("/api/instructor/statistic/quarterlyEnrollment",{params:{userId:e,quarter:t}})).data}catch(e){return console.error("[ACTIONS_GET_TOTAL_SALES]",e),0}},h=async e=>{try{let t=(await d.Z.get("/api/instructor/statistic/revenueOfEachCourse",{params:{userId:e}})).data;return Object.entries(t).map(e=>{let[t,r]=e;return{name:t,total:r}})}catch(e){return console.error("[ACTIONS_GET_CHARTS]",e),[]}},x=async e=>{try{return(await d.Z.get("/api/instructor/statistic/analysis",{params:{userId:e}})).data}catch(e){return console.error("[ACTIONS_GET_COMPOSED_CHART]",e),[]}};var p=r(32161),j=r(35231),y=r(23909),g=r(85369),N=r(68295),w=r(20153);let b=["#0088FE","#00C49F","#FFBB28","#FF8042"],v=Math.PI/180,C=e=>{let{cx:t,cy:r,midAngle:s,innerRadius:n,outerRadius:l,percent:i,index:c}=e,o=n+(l-n)*.5,d=t+o*Math.cos(-s*v);return(0,a.jsx)("text",{x:d,y:r+o*Math.sin(-s*v),fill:"white",textAnchor:d>t?"start":"end",dominantBaseline:"central",children:"".concat((100*i).toFixed(0),"%")})},R=e=>{let{payload:t}=e;return(0,a.jsx)("ul",{className:"list-none p-0 m-0 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-4 h-4 mr-2",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"break-words",children:e.value})]},"item-".concat(t)))})};var k=e=>{let{label:t,data:r}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:t})}),(0,a.jsx)(j.h,{width:"100%",height:400,children:(0,a.jsxs)(y.u,{children:[(0,a.jsx)(g.b,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:C,outerRadius:80,fill:"#8884d8",dataKey:"total",children:r.sort((e,t)=>t.total-e.total).map((e,t)=>(0,a.jsx)(N.b,{fill:b[t%b.length]},"cell-".concat(t)))}),(0,a.jsx)(w.D,{content:R})]})})]})})},S=r(65483),T=r(54142),_=r(2842),Z=r(9542),O=r(85475),D=r(45745),I=r(16638);class A extends c.PureComponent{render(){let{data:e}=this.props;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(n.Zb,{children:(0,a.jsx)(j.h,{width:"100%",height:"100%",children:(0,a.jsxs)(S.c,{width:500,height:300,data:e,margin:{top:20,right:30,left:20,bottom:20},children:[(0,a.jsx)(T.q,{strokeDasharray:"3 3"}),(0,a.jsx)(_.K,{dataKey:"monthYear"}),(0,a.jsx)(Z.B,{yAxisId:"left"}),(0,a.jsx)(Z.B,{yAxisId:"right",orientation:"right"}),(0,a.jsx)(O.u,{}),(0,a.jsx)(w.D,{}),(0,a.jsx)(D.$,{yAxisId:"left",type:"monotone",dataKey:"totalRevenue",fill:"#82ca9d",barSize:20}),(0,a.jsx)(I.x,{yAxisId:"right",type:"monotone",dataKey:"numberOfEnrollments",stroke:"#8884d8",activeDot:{r:8}})]})})})})}}var E=r(29175),B=e=>{let{params:t}=e,r=(0,s.useRouter)(),n=[{title:"Dashboard",link:"/admin/dashboard"},{title:"Instructor Management",link:"/admin/instructor"},{title:"Analytics",link:"/admin/instructor/analytics/".concat(t.userId)}],[l,i]=(0,c.useState)({pieChartData:[],composedChartData:[],totalRevenue:0,totalSales:0}),[d,f]=(0,c.useState)(1),[m,h]=(0,c.useState)(1);return(0,c.useEffect)(()=>{p.w?(async(e,r)=>{let{pieChartData:a,composedChartData:s,totalRevenue:n,totalSales:l}=await u(t.userId,e,r);i({pieChartData:a||[],composedChartData:s||[],totalRevenue:n,totalSales:l})})(d,m):(0,s.redirect)("/")},[r,d,m,t.userId]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)(E.O,{items:n}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 mb-4",children:[(0,a.jsx)(o,{label:"Total Sales",value:l.totalSales,onSelectChange:e=>h(e)}),(0,a.jsx)(o,{label:"Total Revenue",value:l.totalRevenue,shouldFormat:!0,onSelectChange:e=>f(e)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsx)(k,{label:"Percent revenue of each course in last month",data:l.pieChartData}),(0,a.jsx)(A,{data:l.composedChartData})]})]})})}},29175:function(e,t,r){"use strict";r.d(t,{O:function(){return x}});var a=r(57437),s=r(30357),n=r(2265),l=r(13350),i=r(87592),c=(r(63550),r(37440));let o=n.forwardRef((e,t)=>{let{...r}=e;return(0,a.jsx)("nav",{ref:t,"aria-label":"breadcrumb",...r})});o.displayName="Breadcrumb";let d=n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("ol",{ref:t,className:(0,c.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",r),...s})});d.displayName="BreadcrumbList";let u=n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("li",{ref:t,className:(0,c.cn)("inline-flex items-center gap-1.5",r),...s})});u.displayName="BreadcrumbItem";let f=n.forwardRef((e,t)=>{let{asChild:r,className:s,...n}=e,i=r?l.g7:"a";return(0,a.jsx)(i,{ref:t,className:(0,c.cn)("transition-colors hover:text-foreground",s),...n})});f.displayName="BreadcrumbLink";let m=n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("span",{ref:t,role:"link","aria-disabled":"true","aria-current":"page",className:(0,c.cn)("font-normal text-foreground",r),...s})});m.displayName="BreadcrumbPage";let h=e=>{let{children:t,className:r,...s}=e;return(0,a.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,c.cn)("[&>svg]:size-3.5",r),...s,children:null!=t?t:(0,a.jsx)(i.Z,{})})};function x(e){let{items:t}=e;return(0,a.jsx)(o,{children:(0,a.jsx)(d,{children:t.map((e,r)=>(0,a.jsxs)(n.Fragment,{children:[r!==t.length-1&&(0,a.jsx)(u,{children:(0,a.jsx)(f,{href:e.link,children:e.title})}),r<t.length-1&&(0,a.jsx)(h,{children:(0,a.jsx)(s.Z,{})}),r===t.length-1&&(0,a.jsx)(m,{children:e.title})]},e.title))})})}h.displayName="BreadcrumbSeparator"},36013:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return l},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var a=r(57437),s=r(2265),n=r(37440);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},46294:function(e,t,r){"use strict";r.d(t,{Bw:function(){return p},DI:function(){return u},Ph:function(){return d},Ql:function(){return y},i4:function(){return m},ki:function(){return f},n5:function(){return j}});var a=r(57437),s=r(2265),n=r(87497),l=r(42421),i=r(14392),c=r(22468),o=r(37440);let d=n.fC,u=n.ZA,f=n.B4,m=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(n.xz,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...i,children:[s,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.u_,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=n.u_.displayName;let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.$G,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=n.$G.displayName;let p=s.forwardRef((e,t)=>{let{className:r,children:s,position:l="popper",...i}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...i,children:[(0,a.jsx)(h,{}),(0,a.jsx)(n.l_,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(x,{})]})})});p.displayName=n.VY.displayName;let j=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.__,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})});j.displayName=n.__.displayName;let y=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(n.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:s})]})});y.displayName=n.ck.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=n.Z0.displayName},1398:function(e,t,r){"use strict";var a=r(38472),s=r(7561);let n=a.Z.create({baseURL:"https://guardianshield.uk/",withCredentials:!0});n.interceptors.request.use(async e=>{let t;return console.log("Client side cookies: ",t=s.Z.get("jwtToken")),t&&(e.headers.Authorization="Bearer ".concat(t)),e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e)),t.Z=n},77003:function(e,t,r){"use strict";r.d(t,{T:function(){return a}});let a=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},32161:function(e,t,r){"use strict";r.d(t,{w:function(){return a}});let a=()=>{let e=localStorage.getItem("userData");return!!e&&JSON.parse(e).roles.includes("ROLE_INSTRUCTOR")}},37440:function(e,t,r){"use strict";r.d(t,{cn:function(){return l},h:function(){return i}});var a=r(98591),s=r(61362),n=r(24516);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}let i=e=>{let t=new Date(e),r=t.getTimezoneOffset();return console.log("Offset:",r),t.setMinutes(t.getMinutes()-r),console.log("Date:",t),(0,s.Q)(t,{addSuffix:!0})}},87592:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(78030).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},63550:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(78030).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},30357:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(78030).Z)("Slash",[["path",{d:"M22 2 2 22",key:"y4kqgn"}]])}},function(e){e.O(0,[5508,6018,4810,3671,6765,2916,4257,2469,2971,7023,1744],function(){return e(e.s=48780)}),_N_E=e.O()}]);