(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{49194:function(e,r,n){Promise.resolve().then(n.bind(n,55847))},55847:function(e,r,n){"use strict";n.r(r);var t=n(57437),l=n(36661),s=n(15221),o=n(12603),a=n(2529),i=n(69022),c=n(83102),u=n(50495),d=n(2265),m=n(10209),f=n(16463),x=n(4002),p=n(40840),h=n(51035);let N=o.Ry({email:o.Z_().min(1,{message:"Email is required"}).email("Invalid email address"),phone:o.Z_().min(10,{message:"Phone number must be exactly 10 digits"}).regex(/^\d+$/,"Invalid phone number").max(10,{message:"Phone number must be exactly 10 digits"}).optional(),fullName:o.Z_().min(1,{message:"Full name is required"}).max(50,{message:"Full name can have a maximum of 50 characters"}).optional(),avatarImageUrl:o.G0([o.Z_(),o.lB()]).optional()});r.default=()=>{let[e,r]=(0,d.useState)(null),n=(0,i.cI)({resolver:(0,s.F)(N),mode:"onChange",defaultValues:e||void 0}),o=(0,f.useRouter)(),{handleSubmit:g,trigger:v,formState:{errors:j,isSubmitting:y,isValid:b},reset:w,watch:I}=n,[R,M]=(0,d.useState)(!1),O=I();(0,d.useEffect)(()=>{M(Object.keys(O).some(r=>(console.log(r,O[r],null==e?void 0:e[r]),O[r]!==(null==e?void 0:e[r]))))},[O,e]),(0,d.useEffect)(()=>{(async()=>{try{let e=await (0,x.PR)();console.log(e),r(e),w(e)}catch(e){console.error("Failed to fetch user profile:",e)}})()},[w]);let E=async e=>{try{await (0,x.Nq)(e),console.log("Profile updated successfully"),m.ZP.success("Profile updated successfully"),o.refresh()}catch(e){console.error("Failed to update profile:",e)}};return e?(console.log("Button: ",b,y,R),console.log("Disabled: ",y||!b),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Toaster,{}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"rounded-[0.5rem] border bg-background shadow",children:(0,t.jsxs)("div",{className:"space-y-6 p-10 pb-16",children:[(0,t.jsx)(h.Z,{}),(0,t.jsx)("div",{className:"shrink-0 bg-border h-[1px] w-full my-6"}),(0,t.jsxs)("div",{className:"flex flex-col space-y-8 lg:flex-row lg:space-x-12 lg:space-y-0",children:[(0,t.jsx)("aside",{className:"-mx-4 lg:w-1/5",children:(0,t.jsx)(a.Z,{})}),(0,t.jsx)("div",{className:"flex-1 lg:max-w-2xl",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Profile"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"This is how others will see you on site."})]}),(0,t.jsx)("div",{className:"shrink-0 bg-border h-[1px] w-full my-6"}),(0,t.jsx)(l.l0,{...n,children:(0,t.jsxs)("form",{onSubmit:g(E),className:"space-y-4 mt-8",children:[(0,t.jsx)(l.Wi,{control:n.control,name:"email",render:e=>{let{field:r}=e;return(0,t.jsxs)(l.xJ,{children:[(0,t.jsx)(l.lX,{children:"Email"}),(0,t.jsx)(l.NI,{children:(0,t.jsx)(c.I,{disabled:!0,placeholder:"e.g. 'name@example.com'",...r,onBlur:()=>v("email")})}),(0,t.jsx)(l.pf,{className:"text-[0.8rem] text-muted-foreground",children:"You cannot change your email address."}),j.email&&(0,t.jsx)(l.zG,{children:j.email.message})]})}}),(0,t.jsx)(l.Wi,{control:n.control,name:"fullName",render:e=>{let{field:r}=e;return(0,t.jsxs)(l.xJ,{children:[(0,t.jsx)(l.lX,{children:"Full Name"}),(0,t.jsx)(l.NI,{children:(0,t.jsx)(c.I,{disabled:y,placeholder:"e.g. 'John Doe'",...r,onBlur:()=>v("fullName")})}),(0,t.jsx)(l.pf,{className:"text-[0.8rem] text-muted-foreground",children:"This is your public display name and will on your certificate. It should be your real name."}),j.fullName&&(0,t.jsx)(l.zG,{children:j.fullName.message})]})}}),(0,t.jsx)(l.Wi,{control:n.control,name:"phone",render:e=>{let{field:r}=e;return(0,t.jsxs)(l.xJ,{children:[(0,t.jsx)(l.lX,{children:"Phone"}),(0,t.jsx)(l.NI,{children:(0,t.jsx)(c.I,{disabled:y,placeholder:"e.g. '1234567890'",...r,onBlur:()=>v("phone")})}),(0,t.jsx)(l.pf,{className:"text-[0.8rem] text-muted-foreground",children:"It should be your real phone, we maybe need to contact with you for some problems."}),j.phone&&(0,t.jsx)(l.zG,{children:j.phone.message})]})}}),(0,t.jsx)("div",{className:"flex items-center gap-x-2 justify-end",children:(0,t.jsx)(u.z,{type:"submit",disabled:y||!b||!R,children:"Update profile"})})]})})]})})]})]})})})]})):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-screen",children:(0,t.jsx)(p.Z,{})})})}},36661:function(e,r,n){"use strict";n.d(r,{l0:function(){return d},NI:function(){return g},pf:function(){return v},Wi:function(){return f},xJ:function(){return h},lX:function(){return N},zG:function(){return j}});var t=n(57437),l=n(2265),s=n(13350),o=n(69022),a=n(37440),i=n(57490);let c=(0,n(73969).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=l.forwardRef((e,r)=>{let{className:n,...l}=e;return(0,t.jsx)(i.f,{ref:r,className:(0,a.cn)(c(),n),...l})});u.displayName=i.f.displayName;let d=o.RV,m=l.createContext({}),f=e=>{let{...r}=e;return(0,t.jsx)(m.Provider,{value:{name:r.name},children:(0,t.jsx)(o.Qr,{...r})})},x=()=>{let e=l.useContext(m),r=l.useContext(p),{getFieldState:n,formState:t}=(0,o.Gc)(),s=n(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:a}=r;return{id:a,name:e.name,formItemId:"".concat(a,"-form-item"),formDescriptionId:"".concat(a,"-form-item-description"),formMessageId:"".concat(a,"-form-item-message"),...s}},p=l.createContext({}),h=l.forwardRef((e,r)=>{let{className:n,...s}=e,o=l.useId();return(0,t.jsx)(p.Provider,{value:{id:o},children:(0,t.jsx)("div",{ref:r,className:(0,a.cn)("space-y-2",n),...s})})});h.displayName="FormItem";let N=l.forwardRef((e,r)=>{let{className:n,...l}=e,{error:s,formItemId:o}=x();return(0,t.jsx)(u,{ref:r,className:(0,a.cn)(s&&"text-destructive",n),htmlFor:o,...l})});N.displayName="FormLabel";let g=l.forwardRef((e,r)=>{let{...n}=e,{error:l,formItemId:o,formDescriptionId:a,formMessageId:i}=x();return(0,t.jsx)(s.g7,{ref:r,id:o,"aria-describedby":l?"".concat(a," ").concat(i):"".concat(a),"aria-invalid":!!l,...n})});g.displayName="FormControl";let v=l.forwardRef((e,r)=>{let{className:n,...l}=e,{formDescriptionId:s}=x();return(0,t.jsx)("p",{ref:r,id:s,className:(0,a.cn)("text-sm text-muted-foreground",n),...l})});v.displayName="FormDescription";let j=l.forwardRef((e,r)=>{let{className:n,children:l,...s}=e,{error:o,formMessageId:i}=x(),c=o?String(null==o?void 0:o.message):l;return c?(0,t.jsx)("p",{ref:r,id:i,className:(0,a.cn)("text-sm font-medium text-destructive",n),...s,children:c}):null});j.displayName="FormMessage"},83102:function(e,r,n){"use strict";n.d(r,{I:function(){return o}});var t=n(57437),l=n(2265),s=n(37440);let o=l.forwardRef((e,r)=>{let{className:n,type:l,value:o,...a}=e;return(0,t.jsx)("input",{type:l,value:o||"",className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:r,...a})});o.displayName="Input"},52610:function(e,r,n){"use strict";n.d(r,{B:function(){return i}});var t=n(2265),l=n(48970),s=n(55206),o=n(13350),a=n(57437);function i(e){let r=e+"CollectionProvider",[n,i]=(0,l.b)(r),[c,u]=n(r,{collectionRef:{current:null},itemMap:new Map}),d=e=>{let{scope:r,children:n}=e,l=t.useRef(null),s=t.useRef(new Map).current;return(0,a.jsx)(c,{scope:r,itemMap:s,collectionRef:l,children:n})};d.displayName=r;let m=e+"CollectionSlot",f=t.forwardRef((e,r)=>{let{scope:n,children:t}=e,l=u(m,n),i=(0,s.e)(r,l.collectionRef);return(0,a.jsx)(o.g7,{ref:i,children:t})});f.displayName=m;let x=e+"CollectionItemSlot",p="data-radix-collection-item",h=t.forwardRef((e,r)=>{let{scope:n,children:l,...i}=e,c=t.useRef(null),d=(0,s.e)(r,c),m=u(x,n);return t.useEffect(()=>(m.itemMap.set(c,{ref:c,...i}),()=>void m.itemMap.delete(c))),(0,a.jsx)(o.g7,{[p]:"",ref:d,children:l})});return h.displayName=x,[{Provider:d,Slot:f,ItemSlot:h},function(r){let n=u(e+"CollectionConsumer",r);return t.useCallback(()=>{let e=n.collectionRef.current;if(!e)return[];let r=Array.from(e.querySelectorAll("[".concat(p,"]")));return Array.from(n.itemMap.values()).sort((e,n)=>r.indexOf(e.ref.current)-r.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},i]}},57490:function(e,r,n){"use strict";n.d(r,{f:function(){return a}});var t=n(2265),l=n(48712),s=n(57437),o=t.forwardRef((e,r)=>(0,s.jsx)(l.WV.label,{...e,ref:r,onMouseDown:r=>{var n;r.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));o.displayName="Label";var a=o},34048:function(e,r,n){"use strict";n.d(r,{z:function(){return a}});var t=n(2265),l=n(54887),s=n(55206),o=n(28727),a=e=>{var r,n;let a,c;let{present:u,children:d}=e,m=function(e){var r,n;let[s,a]=t.useState(),c=t.useRef({}),u=t.useRef(e),d=t.useRef("none"),[m,f]=(r=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,r)=>{let t=n[e][r];return null!=t?t:e},r));return t.useEffect(()=>{let e=i(c.current);d.current="mounted"===m?e:"none"},[m]),(0,o.b)(()=>{let r=c.current,n=u.current;if(n!==e){let t=d.current,l=i(r);e?f("MOUNT"):"none"===l||(null==r?void 0:r.display)==="none"?f("UNMOUNT"):n&&t!==l?f("ANIMATION_OUT"):f("UNMOUNT"),u.current=e}},[e,f]),(0,o.b)(()=>{if(s){let e=e=>{let r=i(c.current).includes(e.animationName);e.target===s&&r&&l.flushSync(()=>f("ANIMATION_END"))},r=e=>{e.target===s&&(d.current=i(c.current))};return s.addEventListener("animationstart",r),s.addEventListener("animationcancel",e),s.addEventListener("animationend",e),()=>{s.removeEventListener("animationstart",r),s.removeEventListener("animationcancel",e),s.removeEventListener("animationend",e)}}f("ANIMATION_END")},[s,f]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:t.useCallback(e=>{e&&(c.current=getComputedStyle(e)),a(e)},[])}}(u),f="function"==typeof d?d({present:m.isPresent}):t.Children.only(d),x=(0,s.e)(m.ref,(a=null===(r=Object.getOwnPropertyDescriptor(f.props,"ref"))||void 0===r?void 0:r.get)&&"isReactWarning"in a&&a.isReactWarning?f.ref:(a=null===(n=Object.getOwnPropertyDescriptor(f,"ref"))||void 0===n?void 0:n.get)&&"isReactWarning"in a&&a.isReactWarning?f.props.ref:f.props.ref||f.ref);return"function"==typeof d||m.isPresent?t.cloneElement(f,{ref:x}):null};function i(e){return(null==e?void 0:e.animationName)||"none"}a.displayName="Presence"}},function(e){e.O(0,[5508,6018,4810,209,5192,7774,2536,2971,7023,1744],function(){return e(e.s=49194)}),_N_E=e.O()}]);