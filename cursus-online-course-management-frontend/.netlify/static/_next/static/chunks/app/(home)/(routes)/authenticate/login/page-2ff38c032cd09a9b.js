(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1668],{10082:function(e,s,t){Promise.resolve().then(t.bind(t,1149))},1149:function(e,s,t){"use strict";t.r(s);var n=t(57437),r=t(15221),i=t(16463),o=t(69022),l=t(12603),a=t(10209),c=t(5356),u=t(7059),g=t(8407),d=t(16683),h=t(7561),p=t(4002),m=t(46129),f=t(42803);let x=l.Ry({email:l.Z_().min(1,{message:"Email is required"}).email("Invalid email address"),password:l.Z_().min(6,{message:"Password must be at least 6 characters"})});s.default=()=>{let e=(0,i.useRouter)();(0,o.cI)({resolver:(0,r.F)(x),defaultValues:{email:""}});let s=async s=>{try{console.log(s);let t=await (0,f.x4)(s);console.log("Login response:",t),h.Z.set("jwtToken",t.token,{expires:1}),h.Z.set("refreshToken",t.refreshToken,{expires:7});let n=await (0,p.ZP)();localStorage.setItem("userData",JSON.stringify(n)),(0,m.G)()?e.push("/admin/dashboard"):e.push("/"),a.ZP.success("Login successfully!")}catch(e){a.ZP.error("Something went wrong")}},t=async()=>{try{console.log("Initiating Google sign-in popup...");let s=await (0,g.TX)(),t=s.user,n=await t.getIdToken();console.log("Google Sign-In Result:",s);let r=await (0,f.Cb)(n);h.Z.set("jwtToken",r.token,{expires:1}),h.Z.set("refreshToken",r.refreshToken,{expires:7});let i=await (0,p.ZP)();console.log("User Data:",i),localStorage.setItem("userData",JSON.stringify(i)),e.push("/")}catch(e){console.error("Error during Google sign-in with popup:",e),a.ZP.error("Fail to login with Google")}};return(0,n.jsxs)("div",{className:"container relative h-screen flex-col items-center justify-center md:grid lg:max-w-none lg:grid-cols-2 lg:px-0",children:[(0,n.jsx)("a",{href:"/authenticate/signup",className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1   focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2 absolute right-4 top-4 md:right-8 md:top-8",children:"Register"}),(0,n.jsx)("div",{className:"relative hidden h-full flex-col bg-muted text-white lg:flex dark:border-r",children:(0,n.jsx)(c.lr,{plugins:[(0,u.Z)({delay:6e3})],children:(0,n.jsxs)(c.KI,{children:[(0,n.jsx)(c.d$,{}),(0,n.jsx)(c.d$,{})]})})}),(0,n.jsxs)("div",{className:"lg:p-8 pt-20",children:[(0,n.jsx)("h1",{className:"text-2xl pt-9",children:"Log in to continue your learning journey"}),(0,n.jsx)(d.Z,{type:"login",onSubmit:s,handleGoogleSignIn:t})]})]})}},46129:function(e,s,t){"use strict";t.d(s,{G:function(){return n}});let n=()=>{let e=localStorage.getItem("userData");return!!e&&JSON.parse(e).roles.includes("ROLE_ADMIN")}}},function(e){e.O(0,[9208,680,5508,6018,209,5192,8355,4865,3114,4906,2971,7023,1744],function(){return e(e.s=10082)}),_N_E=e.O()}]);