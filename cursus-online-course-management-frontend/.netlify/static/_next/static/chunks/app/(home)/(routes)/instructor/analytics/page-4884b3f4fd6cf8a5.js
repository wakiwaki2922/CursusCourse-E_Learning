(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3593],{49926:function(e,t,a){Promise.resolve().then(a.bind(a,78977))},78977:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var r=a(57437),s=a(16463),n=a(36013),l=a(46294),i=a(77003),o=a(2265),c=e=>{let{value:t,label:a,shouldFormat:s,onSelectChange:c}=e,[d,u]=(0,o.useState)(1);return(0,o.useEffect)(()=>{1!==d&&c(d)},[d,c]),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsxs)(n.ll,{className:"text-sm font-medium",children:[a," of last ",d," ",d>1?"months":"month"]}),(0,r.jsxs)(l.Ph,{onValueChange:e=>u(parseInt(e)),children:[(0,r.jsx)(l.i4,{className:"w-fit",children:(0,r.jsx)(l.ki,{})}),(0,r.jsx)(l.Bw,{children:(0,r.jsxs)(l.DI,{children:[(0,r.jsx)(l.n5,{children:a}),(0,r.jsx)(l.Ql,{value:"1",children:"Last 1 month"}),(0,r.jsx)(l.Ql,{value:"3",children:"Last 3 months"}),(0,r.jsx)(l.Ql,{value:"6",children:"Last 6 months"}),(0,r.jsx)(l.Ql,{value:"9",children:"Last 9 months"}),(0,r.jsx)(l.Ql,{value:"12",children:"Last 1 year"})]})})]})]}),(0,r.jsx)(n.aY,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:s?(0,i.T)(t):t})})]})},d=a(1398);let u=async(e,t)=>{try{let a=await h(),r=await x(),s=await m(t),n=await f(e);return{pieChartData:a,composedChartData:r,totalRevenue:n,totalSales:s}}catch(e){return console.log("[ACTION_GET_ANALYTICS]",e),{pieChartData:[],composedChartData:[],totalRevenue:0,totalSales:0}}},f=async e=>{try{return(await d.Z.get("/api/instructor/statistic/auth/quarterly_revenue/".concat(e))).data}catch(e){return console.error("[ACTIONS_GET_TOTAL_REVENUE]",e),0}},m=async e=>{try{let t="/api/instructor/statistic/auth/quarterly_number_of_enrollment/".concat(e);return console.log("[ENDPOINT]",t),(await d.Z.get(t)).data}catch(e){return console.error("[ACTIONS_GET_TOTAL_SALES]",e),0}},h=async()=>{try{let e=(await d.Z.get("/api/instructor/statistic/auth/revenue_of_each_course")).data;return Object.entries(e).map(e=>{let[t,a]=e;return{name:t,total:a}})}catch(e){return console.error("[ACTIONS_GET_CHARTS]",e),[]}},x=async()=>{try{return(await d.Z.get("/api/instructor/statistic/auth/compose_analysis")).data}catch(e){return console.error("[ACTIONS_GET_COMPOSED_CHART]",e),[]}};var p=a(32161),j=a(35231),y=a(23909),g=a(85369),N=a(68295),w=a(20153);let b=["#0088FE","#00C49F","#FFBB28","#FF8042"],v=Math.PI/180,C=e=>{let{cx:t,cy:a,midAngle:s,innerRadius:n,outerRadius:l,percent:i,index:o}=e,c=n+(l-n)*.5,d=t+c*Math.cos(-s*v);return(0,r.jsx)("text",{x:d,y:a+c*Math.sin(-s*v),fill:"white",textAnchor:d>t?"start":"end",dominantBaseline:"central",children:"".concat((100*i).toFixed(0),"%")})},_=e=>{let{payload:t}=e;return(0,r.jsx)("ul",{className:"list-none p-0 m-0 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"w-4 h-4 mr-2",style:{backgroundColor:e.color}}),(0,r.jsx)("span",{className:"break-words",children:e.value})]},"item-".concat(t)))})};var T=e=>{let{label:t,data:a}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,r.jsx)(n.ll,{className:"text-sm font-medium",children:t})}),(0,r.jsx)(j.h,{width:"100%",height:400,children:(0,r.jsxs)(y.u,{children:[(0,r.jsx)(g.b,{data:a,cx:"50%",cy:"50%",labelLine:!1,label:C,outerRadius:80,fill:"#8884d8",dataKey:"total",children:a.sort((e,t)=>t.total-e.total).map((e,t)=>(0,r.jsx)(N.b,{fill:b[t%b.length]},"cell-".concat(t)))}),(0,r.jsx)(w.D,{content:_})]})})]})})},R=a(65483),S=a(54142),O=a(2842),D=a(9542),A=a(85475),E=a(45745),Z=a(16638);class k extends o.PureComponent{render(){let{data:e}=this.props;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.Zb,{children:(0,r.jsx)(j.h,{width:"100%",height:"100%",children:(0,r.jsxs)(R.c,{width:500,height:300,data:e,margin:{top:20,right:30,left:20,bottom:20},children:[(0,r.jsx)(S.q,{strokeDasharray:"3 3"}),(0,r.jsx)(O.K,{dataKey:"monthYear"}),(0,r.jsx)(D.B,{yAxisId:"left"}),(0,r.jsx)(D.B,{yAxisId:"right",orientation:"right"}),(0,r.jsx)(A.u,{}),(0,r.jsx)(w.D,{}),(0,r.jsx)(E.$,{yAxisId:"left",type:"monotone",dataKey:"totalRevenue",fill:"#82ca9d",barSize:20}),(0,r.jsx)(Z.x,{yAxisId:"right",type:"monotone",dataKey:"numberOfEnrollments",stroke:"#8884d8",activeDot:{r:8}})]})})})})}}var I=()=>{let e=(0,s.useRouter)(),[t,a]=(0,o.useState)({pieChartData:[],composedChartData:[],totalRevenue:0,totalSales:0}),[n,l]=(0,o.useState)(1),[i,d]=(0,o.useState)(1),f=async(e,t)=>{let{pieChartData:r,composedChartData:s,totalRevenue:n,totalSales:l}=await u(e,t);a({pieChartData:r||[],composedChartData:s||[],totalRevenue:n,totalSales:l})};return(0,o.useEffect)(()=>{p.w?f(n,i):(0,s.redirect)("/")},[e,n,i]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsx)(c,{label:"Total Sales",value:t.totalSales,onSelectChange:e=>d(e)}),(0,r.jsx)(c,{label:"Total Revenue",value:t.totalRevenue,shouldFormat:!0,onSelectChange:e=>l(e)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsx)(T,{label:"Percent revenue of each course in last month",data:t.pieChartData}),(0,r.jsx)(k,{data:t.composedChartData})]})]})})}},36013:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return d},eW:function(){return u},ll:function(){return o}});var r=a(57437),s=a(2265),n=a(37440);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},46294:function(e,t,a){"use strict";a.d(t,{Bw:function(){return p},DI:function(){return u},Ph:function(){return d},Ql:function(){return y},i4:function(){return m},ki:function(){return f},n5:function(){return j}});var r=a(57437),s=a(2265),n=a(87497),l=a(42421),i=a(14392),o=a(22468),c=a(37440);let d=n.fC,u=n.ZA,f=n.B4,m=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(n.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[s,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=n.u_.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=n.$G.displayName;let p=s.forwardRef((e,t)=>{let{className:a,children:s,position:l="popper",...i}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,r.jsx)(h,{}),(0,r.jsx)(n.l_,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(x,{})]})})});p.displayName=n.VY.displayName;let j=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})});j.displayName=n.__.displayName;let y=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(n.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:s})]})});y.displayName=n.ck.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=n.Z0.displayName},1398:function(e,t,a){"use strict";var r=a(38472),s=a(7561);let n=r.Z.create({baseURL:"https://guardianshield.uk/",withCredentials:!0});n.interceptors.request.use(async e=>{let t;return console.log("Client side cookies: ",t=s.Z.get("jwtToken")),t&&(e.headers.Authorization="Bearer ".concat(t)),e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e)),t.Z=n},77003:function(e,t,a){"use strict";a.d(t,{T:function(){return r}});let r=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},32161:function(e,t,a){"use strict";a.d(t,{w:function(){return r}});let r=()=>{let e=localStorage.getItem("userData");return!!e&&JSON.parse(e).roles.includes("ROLE_INSTRUCTOR")}},37440:function(e,t,a){"use strict";a.d(t,{cn:function(){return l},h:function(){return i}});var r=a(98591),s=a(61362),n=a(24516);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,r.W)(t))}let i=e=>{let t=new Date(e),a=t.getTimezoneOffset();return console.log("Offset:",a),t.setMinutes(t.getMinutes()-a),console.log("Date:",t),(0,s.Q)(t,{addSuffix:!0})}}},function(e){e.O(0,[5508,6018,4810,3671,6765,2916,4257,2469,2971,7023,1744],function(){return e(e.s=49926)}),_N_E=e.O()}]);