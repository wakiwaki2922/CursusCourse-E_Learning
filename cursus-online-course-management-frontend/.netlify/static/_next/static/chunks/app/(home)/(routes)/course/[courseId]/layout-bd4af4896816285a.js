(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2638],{62406:function(e,t,r){Promise.resolve().then(r.bind(r,12416))},87292:function(e,t,r){"use strict";r.d(t,{Dv:function(){return u},PS:function(){return l},aA:function(){return n},d7:function(){return a},dq:function(){return c},mt:function(){return i}});var s=r(49894),o=r(1398);let n=async(e,t)=>{if((0,s.yn)())throw Error("You are not allowed to create lesson");try{let r=await o.Z.post("/api/lessons/auth/createLesson/".concat(e),{title:t});return console.log("Create lesson response",r.data),r.data}catch(e){if(console.error("[ACTIONS_CREATE_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},a=async e=>{try{let t=await o.Z.get("/api/lessons/auth/getLessonById/".concat(e));return console.log("Get lesson response",t.data),t.data}catch(e){if(console.error("[ACTIONS_GET_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},l=async(e,t)=>{if((0,s.yn)())throw Error("You are not allowed to edit lesson");try{console.log("Edit lesson values",t);let r=await o.Z.put("/api/lessons/auth/updateLesson/".concat(e),t);return console.log("Update lesson response",r.data),r.data}catch(e){if(console.log("[ACTIONS_EDIT_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},c=async(e,t)=>{if((0,s.yn)())throw Error("You are not allowed to upload lesson video");try{let r=new FormData;r.append("file",t);let s=await o.Z.put("/api/lessons/auth/uploadVideo/".concat(e),r);return console.log("Upload video response",s.data),s.data}catch(e){if(console.error("[ACTIONS_UPLOAD_LESSON_VIDEO]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},i=async(e,t)=>{if((0,s.yn)())throw Error("You are not allowed to edit this lesson");try{let r="/api/lessons/auth/course/".concat(e,"/reorderLesson");console.log("Reorder lesson updateData",r,t);let s=await o.Z.patch(r,t);return console.log("Reorder lesson response",s.data),s.data}catch(e){if(console.error("[ACTIONS_REORDER_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},u=async e=>{if((0,s.yn)())throw Error("You are not allowed to delete lesson");try{let t=await o.Z.delete("/api/lessons/auth/deleteLessonAndReorder/".concat(e));return console.log("Delete lesson response",t.data),t.data}catch(e){if(console.error("[ACTIONS_DELETE_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}}},37428:function(e,t,r){"use strict";r.d(t,{c:function(){return o},h:function(){return n}});var s=r(1398);let o=async(e,t)=>{try{let r="https://www.cursusmate.online",o=await s.Z.post("/api/payment/auth/createEnrollRequestPayment",{amount:e,currency:"USD",description:"Course enrollment for course title ".concat(t.courseTitle),method:"paypal",cancelUrl:"".concat(r,"/course/").concat(t.courseId,"/lesson"),returnUrl:"".concat(r,"/course/").concat(t.courseId,"/lesson/payment-success"),payeeId:"sb-w3nfo30755669@gmail.com"});return console.log("[ACTIONS_ENROLL_PAYMENT] createEnrollPayment response: ",o.data),o.data}catch(e){if(console.error("[ACTIONS_ENROLL_PAYMENT]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},n=async(e,t,r)=>{try{console.log("[ACTIONS_ENROLL_PAYMENT] executeEnrollPayment: ",e,t);let o=await s.Z.post("/api/payment/auth/executeEnrollRequestPayment",{paymentId:e,payerId:t,courseId:r});return console.log("[ACTIONS_ENROLL_PAYMENT] executeEnrollPayment response: ",o.data),o.data}catch(e){if(console.error("[ACTIONS_ENROLL_PAYMENT]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}}},19798:function(e,t,r){"use strict";r.d(t,{B$:function(){return l},D$:function(){return c},Kz:function(){return g},PI:function(){return h},Uf:function(){return o},V3:function(){return a},Yt:function(){return i},n6:function(){return n},tG:function(){return d},xb:function(){return u}});var s=r(1398);let o=async()=>{try{return(await s.Z.get("/api/courses/auth/getCoursesOfInstructor")).data}catch(e){return console.log("[ACTIONS_GET_COURSES_OF_INSTRUCTOR]",e),[]}},n=async e=>{try{return(await s.Z.get("/api/courses/auth/getCoursesOfInstructorById",{params:{userId:e}})).data}catch(e){return console.log("[ACTIONS_GET_COURSES_OF_INSTRUCTOR]",e),[]}},a=async()=>{try{return(await s.Z.get("/api/courses/getAllCourses")).data}catch(e){return console.log("[ACTIONS_GET_ALL_COURSES]",e),[]}},l=async(e,t)=>{try{return(await s.Z.get("/api/courses/searchCourses",{params:{title:e,categoryId:t}})).data}catch(e){return console.log("[ACTIONS_SEARCH_COURSES]",e),[]}},c=async()=>{try{return(await s.Z.get("/api/courses/getPublishedCourses")).data}catch(e){return console.log("[ACTIONS_GET_ALL_COURSES]",e),[]}},i=async e=>{try{let t=await s.Z.get("/api/courses/getCourseById/".concat(e));return console.log("Get course by id response",t.data),t.data}catch(e){if(console.log("[ACTIONS_GET_COURSE_BY_ID]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},u=async e=>{try{let t=(await s.Z.get("/api/courses/getCourseByIdByUser/".concat(e))).data;return console.log("Get course by id response",t),t}catch(e){if(console.log("[ACTIONS_GET_COURSE_BY_ID]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},d=async()=>{try{return(await s.Z.get("/api/category/getAll")).data}catch(e){return console.log("[ACTIONS_GET_ALL_CATEGORIES]",e),[]}},g=async()=>{try{return(await s.Z.get("/api/courses/auth/getStudentOwnedCourses")).data}catch(e){return console.log("[ACTIONS_GET_STUDENT_OWN_COURSES]",e),[]}},h=async e=>{try{return(await s.Z.get("/api/courses/auth/getStudentOwnedCourseWithLessonsAndProgressById/".concat(e))).data}catch(e){return console.log("[ACTIONS_GET_STUDENT_OWN_COURSE_BY_ID]",e),null}}},63067:function(e,t,r){"use strict";r.d(t,{ES:function(){return n},TT:function(){return o},W3:function(){return l},ob:function(){return a}});var s=r(1398);let o=async e=>{try{return(await s.Z.get("/api/lessonProgress/auth/getProgressCount/".concat(e))).data}catch(e){return console.log("[ACTIONS_GET_PROGRESS_COUNT]",e),0}},n=async(e,t)=>{try{let r="/api/lessonProgress/auth/course/".concat(e,"/lesson/").concat(t,"/completed"),o=await s.Z.post(r);return console.log("[ACTIONS_COMPLETED_LESSON]",o.data),o.data}catch(e){if(console.log("[ACTIONS_COMPLETED_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong! Completed lesson failed");throw Error(e.message||"Something went wrong! Completed lesson failed")}},a=async(e,t)=>{try{let r="/api/lessonProgress/auth/course/".concat(e,"/lesson/").concat(t,"/uncompleted"),o=await s.Z.patch(r);return console.log("[ACTIONS_UNCOMPLETED_LESSON]",o.data),o.data}catch(e){if(console.log("[ACTIONS_UNCOMPLETED_LESSON]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong! Uncompleted lesson failed");throw Error(e.message||"Something went wrong! Uncompleted lesson failed")}},l=async e=>{try{let t=(await s.Z.get("/api/enrollment/auth/generateCertificate/course/".concat(e),{responseType:"blob",headers:{"Content-Type":"application/pdf"}})).data;return URL.createObjectURL(t)}catch(e){if(console.error("Error generating certificate:",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong! Uncompleted course to get certificate");throw Error(e.message||"Something went wrong! Uncompleted course to get certificate")}}},89058:function(e,t,r){"use strict";r.d(t,{d:function(){return a},g:function(){return l}});var s=r(1398),o=r(19798),n=r(87292);let a=async e=>{let{courseId:t,lessonId:r}=e;try{let e=await l(t),a=await (0,o.xb)(t),c=await (0,n.d7)(r),i=a.lessons.at(c.position),u=(await s.Z.get("/api/lessons/auth/userIsCompletedLesson/".concat(r))).data;return console.log("User progress: ",u),{enrollment:e,course:a,lesson:c,nextChapter:i,userProgress:u}}catch(e){if(console.error("[ACTIONS_GET_COURSE_LESSON_TO_PLAY]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},l=async e=>{try{let t=await s.Z.get("/api/enrollment/auth/course/".concat(e,"/getEnrollmentOfUser"));return console.log("Get enrollment of user response",t.data),t.data}catch(e){return null}}},12416:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return L}});var s=r(57437),o=r(19798),n=r(63067),a=r(2265),l=r(74183),c=r(95317),i=r(42873),u=r(89058),d=r(1988),g=r(37440),h=r(74453),m=r(13231),p=r(40472),w=r(16463),f=e=>{let{label:t,id:r,isCompleted:o,courseId:n,isLocked:a}=e,l=(0,w.usePathname)(),c=(0,w.useRouter)(),i=a?o?m.Z:p.Z:h.Z,u=null==l?void 0:l.includes(r);return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("button",{onClick:()=>{c.push("/course/".concat(n,"/lesson/").concat(r))},type:"button",className:(0,g.cn)("flex items-center gap-x-2 text-slate-500 text-sm font-[500] pl-6 transition-all hover:text-slate-600 hover:bg-slate-300/20",u&&"text-slate-700 bg-slate-200/20 hover:bg-slate-200/20 hover:text-slate-700",o&&"text-emerald-700 hover:text-emerald-700",o&&u&&"bg-emerald-200/20"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2 py-4 text-left h-full",children:[(0,s.jsx)("div",{children:(0,s.jsx)(i,{size:22,className:(0,g.cn)("text-slate-500",u&&"text-slate-700",o&&"text-emerald-700")})}),(0,s.jsx)("div",{className:"flex-wrap",children:t})]}),(0,s.jsx)("div",{className:(0,g.cn)("ml-auto opacity-0 border-2 border-slate-700 h-full transition-all",u&&"opacity-100",o&&"border-emerald-700")})]})})},y=r(37428),x=r(77003),E=r(70074),S=r(10209),N=r(49894),C=r(81836),_=e=>{let{price:t,course:r}=e,[o,n]=(0,a.useState)(!1),l=async()=>{let e=await (0,y.c)(t,r);window.location.href=e};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Toaster,{}),(0,s.jsxs)("div",{className:"font-bold text-xl text-center mb-4",children:["Enroll now"," ",(0,s.jsx)("span",{className:"text-red-600 text-2xl",children:(0,x.T)(t)})]}),(0,s.jsxs)(E.Vv,{options:{clientId:"AdE-YdMXl7yCLKKS9iQ7Rjp-mhZia12leLr8nEIqDVzt3mtRW3Dbk_cPCMjeY_l_8jv0KuQXLWdLuQVP"},children:[(0,N.Wv)()&&(0,s.jsx)(C.j,{label:"Your student account is blocked. Please contact support."}),(0,s.jsx)(E.ch,{style:{layout:"horizontal",color:"gold",shape:"rect",height:40,tagline:!1},onClick:(0,N.Wv)()?void 0:l,onError:e=>{console.error("Error with payment: ",e),S.ZP.error("Payment failed. Please try again.")},onCancel:()=>{S.ZP.error("Payment cancelled"),console.log("Payment cancelled")},disabled:(0,N.Wv)()})]})]})},v=r(36198),O=()=>{let e=(0,w.useRouter)(),t=(0,w.usePathname)(),r=null==t?void 0:t.split("/")[2],o=null==t?void 0:t.includes("courseCertificate");return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("button",{onClick:()=>{e.push("/course/".concat(r,"/lesson/courseCertificate"))},type:"button",className:(0,g.cn)("flex items-center gap-x-2 text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-pink-600 text-sm font-[500] pl-6 transition-all hover:text-transparent hover:bg-clip-text hover:bg-gradient-to-r hover:from-emerald-900 hover:to-yellow-400",o&&"text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-pink-600 hover:text-transparent hover:bg-clip-text hover:bg-gradient-to-r hover:from-emerald-900 hover:to-yellow-400"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2 py-4 text-left h-full",children:[(0,s.jsx)("div",{children:(0,s.jsx)(v.Z,{size:22,className:"text-sky-800"})}),(0,s.jsx)("div",{className:"flex-wrap",children:"Congratulation! Your Certificate"})]}),(0,s.jsx)("div",{className:(0,g.cn)("ml-auto opacity-0 border-2 border-emerald-700 h-full transition-all",o&&"opacity-100")})]})})},T=e=>{let{course:t,progressCount:r}=e,[o,l]=(0,a.useState)(!1),[c,i]=(0,a.useState)(!1),[g,h]=(0,a.useState)([]);return(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,u.g)(t.courseId);e&&e.lessonProgressList?(h(e.lessonProgressList),l(!0)):(h([]),l(!1))}catch(e){console.error("Error fetching enrollment:",e),h([]),l(!1)}})()},[t]),(0,a.useEffect)(()=>{(async()=>{i(100===await (0,n.TT)(t.courseId))})()},[t.courseId]),(0,s.jsxs)("div",{className:"h-full border-r flex flex-col overflow-y-auto shadow-sm",children:[(0,s.jsxs)("div",{className:"p-4 flex flex-col border-b",children:[(0,s.jsx)("h1",{className:"font-semibold",children:t.courseTitle}),o&&(0,s.jsx)("div",{className:"mt-10",children:(0,s.jsx)(d.Z,{variant:"success",value:r||0})}),!o&&(0,s.jsx)("div",{className:"mt-10",children:(0,s.jsx)(_,{course:t,price:t.price})})]}),c&&(0,s.jsx)(O,{}),(0,s.jsx)("div",{className:"flex flex-col w-full",children:t.lessons.sort((e,t)=>e.position-t.position).map(e=>{var r;return(0,s.jsx)(f,{id:e.lessonId,label:e.lessonTitle,isCompleted:(null==g?void 0:null===(r=g.find(t=>t.lessonId===e.lessonId))||void 0===r?void 0:r.lessonStatus.toLowerCase())==="completed",courseId:t.courseId,isLocked:e.isFree||o.valueOf()},e.lessonId)})})]})},j=e=>{let{course:t,progressCount:r}=e;return(0,s.jsxs)(c.yo,{children:[(0,s.jsx)(c.aM,{className:"md:hidden pr-4 hover:opacity-75 transition",children:(0,s.jsx)(i.Z,{})}),(0,s.jsx)(c.ue,{side:"left",className:"p-0 bg-white w-72",children:(0,s.jsx)(T,{course:t,progressCount:r})})]})},b=e=>{let{course:t,progressCount:r}=e;return(0,s.jsxs)("div",{className:"p-8 border-b h-full flex items-center bg-white shadow-sm",children:[(0,s.jsx)(j,{course:t,progressCount:r}),(0,s.jsx)(l.Z,{})]})},I=r(40840),L=e=>{let{children:t,params:r}=e,[l,c]=(0,a.useState)(),[i,u]=(0,a.useState)(0),[d,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{localStorage.getItem("userData")&&g(!0)},[]);let h=(0,a.useCallback)(async()=>{try{let e=await (0,o.Yt)(r.courseId);c({...e,lessons:e.lessons.filter(e=>!0===e.isPublished).map(e=>({...e,userProgress:e.lessonProgressList||null}))})}catch(e){console.error("Error fetching course:",e)}},[r]);return((0,a.useEffect)(()=>{h(),(async()=>{d?u(await (0,n.TT)(r.courseId)||0):u(0)})()},[r,h,d]),l)?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"h-full",children:[(0,s.jsx)("div",{className:"h-[80px] md:pl-80 fixed top-0 left-0 right-0 z-50",children:(0,s.jsx)(b,{course:l,progressCount:i})}),(0,s.jsx)("div",{className:"hidden md:flex h-full w-80 flex-col fixed inset-y-0 z-50",children:(0,s.jsx)(T,{course:l,progressCount:i})}),(0,s.jsx)("main",{className:"md:pl-80 h-full",children:t})]})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-screen",children:(0,s.jsx)(I.Z,{})})})}},40840:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(57437),o=r(2265);function n(){return(0,o.useEffect)(()=>{(async function(){let{jelly:e}=await r.e(1916).then(r.bind(r,31916));e.register()})()},[]),(0,s.jsx)("l-jelly",{color:"rgb(6 83 142)"})}},81836:function(e,t,r){"use strict";r.d(t,{j:function(){return u}});var s=r(57437),o=r(36127),n=r(92940),a=r(73969),l=r(37440);let c=(0,a.j)("border text-center p-4 text-sm flex items-center w-full",{variants:{variant:{warning:"bg-yellow-200/80 border-yellow-30 text-primary",success:"bg-emerald-700 border-emerald-800 text-secondary"}},defaultVariants:{variant:"warning"}}),i={warning:o.Z,success:n.Z},u=e=>{let{label:t,variant:r}=e,o=i[r||"warning"];return(0,s.jsxs)("div",{className:(0,l.cn)(c({variant:r})),children:[(0,s.jsx)(o,{className:"h-4 w-4 mr-2"}),t]})}},1988:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var s=r(57437),o=r(37440),n=r(2265),a=r(45301);let l=(0,r(73969).j)("h-full w-full flex-1 bg-primary transition-all",{variants:{variant:{default:"bg-sky-600",success:"bg-emerald-700",warning:"bg-rose-700"}},defaultVariants:{variant:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,value:n,variant:c,...i}=e;return(0,s.jsx)(a.fC,{ref:t,className:(0,o.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...i,children:(0,s.jsx)(a.z$,{className:(0,o.cn)(l({variant:c})),style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});c.displayName=a.fC.displayName;let i={default:"text-sky-700",success:"text-emerald-700",warning:"text-rose-700"},u={default:"text-sm",sm:"text-xs"};var d=e=>{let{value:t,variant:r,size:n}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)(c,{className:"h-2",value:t,variant:r}),(0,s.jsxs)("p",{className:(0,o.cn)("font-medium mt-2 text-sky-700",i[r||"default"],u[n||"default"]),children:["warning"===r&&"Not Started. Need enroll to start.","warning"!==r&&"".concat(Math.round(t),"% Completed")]})]})}},1398:function(e,t,r){"use strict";var s=r(38472),o=r(7561);let n=s.Z.create({baseURL:"https://guardianshield.uk/",withCredentials:!0});n.interceptors.request.use(async e=>{let t;return console.log("Client side cookies: ",t=o.Z.get("jwtToken")),t&&(e.headers.Authorization="Bearer ".concat(t)),e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e)),t.Z=n},77003:function(e,t,r){"use strict";r.d(t,{T:function(){return s}});let s=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}},function(e){e.O(0,[9208,5508,6018,4810,209,3671,6765,7138,6399,8355,1632,590,8797,2971,7023,1744],function(){return e(e.s=62406)}),_N_E=e.O()}]);