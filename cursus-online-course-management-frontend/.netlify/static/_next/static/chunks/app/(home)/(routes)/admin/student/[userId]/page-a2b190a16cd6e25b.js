(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9487],{64437:function(e,t,a){Promise.resolve().then(a.bind(a,4220))},7277:function(e,t,a){"use strict";a.d(t,{GA:function(){return o},Mu:function(){return i},gg:function(){return l},hH:function(){return n},lm:function(){return d},xC:function(){return s}});var r=a(1398);let s=async()=>{try{return(await r.Z.get("/api/admin/auth/getAllStudent")).data}catch(e){return console.log("[ACTIONS_GET_STUDENT_WITH_ENROLLMENT]",e),[]}},l=async e=>{try{let t=new FormData;t.append("file",e);let a=await r.Z.put("/api/user/auth/uploadAvatar",t);return console.log("Upload response",a.data),a.data}catch(e){if(console.error("[ACTIONS_UPLOAD_AVATAR]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},n=async e=>{try{return(await r.Z.get("/api/courses/auth/getStudentOwnedCoursesById",{params:{userId:e}})).data}catch(e){return console.log("[ACTIONS_GET_STUDENT_OWN_COURSES]",e),[]}},o=async e=>{try{return(await r.Z.get("/api/user/auth/getUserById",{params:{userId:e}})).data}catch(e){return console.error("[ACTIONS_GET_USER]",e),null}},i=async(e,t)=>{try{return(await r.Z.put("/api/admin/auth/updateStatusUser/".concat(e),null,{params:{newStatus:t}})).data}catch(e){if(console.error("[ACTIONS_GET_USER]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}},d=async e=>{try{return(await r.Z.get("/api/auth/sendVerifyEmail/".concat(e))).data}catch(e){if(console.error("[ACTIONS_VERIFY_EMAIL]",e),e.response&&e.response.data)throw Error(e.response.data.message||"Something went wrong!");throw Error(e.message||"Something went wrong!")}}},4220:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Z}});var r=a(57437),s=a(2265),l=a(16463),n=a(7277),o=a(29175),i=a(47667),d=a(64344),c=a(94693),u=a(50495),m=a(46910),f=a(37440),h=a(56900),x=a(63550),g=a(26676),p=a(36141),j=a(87138);let N=[{accessorKey:"courseTitle",header:e=>{let{column:t}=e;return(0,r.jsxs)(u.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Title",(0,r.jsx)(h.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"courseEnrolledPrice",header:e=>{let{column:t}=e;return(0,r.jsxs)(u.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["EnrolledPrice",(0,r.jsx)(h.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,a=parseFloat(t.getValue("courseEnrolledPrice")||"0"),s=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a);return(0,r.jsx)("div",{children:s})}},{accessorKey:"enrolledDate",header:e=>{let{column:t}=e;return(0,r.jsxs)(u.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Enrolled Date",(0,r.jsx)(h.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,a=t.getValue("enrolledDate");return(0,r.jsx)("span",{children:new Date(a).toLocaleDateString()})}},{accessorKey:"userCourseProgress",header:e=>{let{column:t}=e;return(0,r.jsxs)(u.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Progress",(0,r.jsx)(h.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,a=t.getValue("userCourseProgress")||0;return(0,r.jsxs)(c.C,{className:(0,f.cn)("bg-red-700",a>=20&&80>=a&&"bg-orange-500",a>=80&&100>=a&&"bg-blue-500",100===a&&"bg-green-700"),children:[String(a),"%"]})}},{id:"actions",cell:e=>{let{row:t}=e,{courseId:a}=t.original,s=t.getValue("userCourseProgress")||0;return(0,r.jsxs)(m.h_,{children:[(0,r.jsx)(m.$F,{asChild:!0,children:(0,r.jsxs)(u.z,{variant:"ghost",className:"h-4 w-8 p-0",children:[(0,r.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,r.jsx)(x.Z,{className:"h-4 w-4"})]})}),(0,r.jsxs)(m.AW,{align:"end",children:[(0,r.jsx)(j.default,{href:"/course/".concat(a),children:(0,r.jsxs)(m.Xi,{children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Go to course"]})}),100===s&&(0,r.jsx)(j.default,{href:"/course/".concat(a,"/lesson/courseCertificate"),children:(0,r.jsxs)(m.Xi,{children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Get certificate"]})})]})]})}}];var w=a(83102),y=a(26975),b=a(88762),v=a(22258);function C(e){var t,a,l;let{columns:n,data:o}=e,[i,d]=(0,s.useState)([]),[c,m]=(0,s.useState)([]),f=(0,b.b7)({data:o,columns:n,getCoreRowModel:(0,v.sC)(),getPaginationRowModel:(0,v.G_)(),onSortingChange:d,getSortedRowModel:(0,v.tj)(),onColumnFiltersChange:m,getFilteredRowModel:(0,v.vL)(),state:{sorting:i,columnFilters:c}});return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center py-4 justify-between",children:(0,r.jsx)(w.I,{placeholder:"Filter course...",value:null!==(l=null===(t=f.getColumn("courseTitle"))||void 0===t?void 0:t.getFilterValue())&&void 0!==l?l:"",onChange:e=>{var t;return null===(t=f.getColumn("courseTitle"))||void 0===t?void 0:t.setFilterValue(e.target.value)},className:"max-w-sm"})}),(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(y.iA,{children:[(0,r.jsx)(y.xD,{children:f.getHeaderGroups().map(e=>(0,r.jsx)(y.SC,{children:e.headers.map(e=>(0,r.jsx)(y.ss,{children:e.isPlaceholder?null:(0,b.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,r.jsx)(y.RM,{children:(null===(a=f.getRowModel().rows)||void 0===a?void 0:a.length)?f.getRowModel().rows.map(e=>(0,r.jsx)(y.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,r.jsx)(y.pj,{children:(0,b.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,r.jsx)(y.SC,{children:(0,r.jsx)(y.pj,{colSpan:n.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,r.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>f.previousPage(),disabled:!f.getCanPreviousPage(),children:"Previous"}),(0,r.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>f.nextPage(),disabled:!f.getCanNextPage(),children:"Next"})]})]})}var S=a(10209),_=a(36661),R=a(12603),E=a(69022),T=a(15221),I=a(41647),O=a(82695),A=a(19573),U=a(80775),L=a(24241);let k=R.Ry({email:R.Z_().min(1,{message:"Email is required"}).email("Invalid email address"),phone:R.G0([R.Z_().min(10,{message:"Phone number must be exactly 10 digits"}).regex(/^\d+$/,"Invalid phone number").max(10,{message:"Phone number must be exactly 10 digits"}),R.lB()]).optional(),fullName:R.Z_().min(1,{message:"Full name is required"}).max(50,{message:"Full name can have a maximum of 50 characters"}).optional(),avatarImageUrl:R.Z_().optional(),status:R.Z_().optional(),joinDate:R.oQ.date().optional()});var Z=e=>{let t,a,m,h,{params:x}=e,g=[{title:"Dashboard",link:"/admin/dashboard"},{title:"Student Management",link:"/admin/student"},{title:"Account",link:"/admin/student/".concat(x.userId)}],[p,j]=(0,s.useState)(null),y=(0,E.cI)({resolver:(0,T.F)(k),mode:"onChange",defaultValues:p||void 0}),b=(0,l.useRouter)(),[v,R]=(0,s.useState)(!1),{handleSubmit:Z,trigger:D,formState:{errors:F},reset:B}=y;switch((0,s.useEffect)(()=>{(async()=>{try{let e=await (0,n.GA)(x.userId);console.log(e),j(e),R(!1),B(e)}catch(e){console.error("Failed to fetch user profile:",e)}})()},[x.userId,B,v]),null==p?void 0:p.status){case"AVAILABLE":t="BLOCK_ROLE_STUDENT",a="bg-yellow-600";break;case"BLOCK_ACCOUNT":t="BLOCK_ROLE_INSTRUCTOR",a="bg-yellow-500";break;case"BLOCK_ROLE_STUDENT":t="AVAILABLE",a="bg-lime-600";break;case"BLOCK_ROLE_INSTRUCTOR":t="BLOCK_ACCOUNT",a="bg-red-600";break;default:t="UNKNOWN",a="bg-gray-400"}let P=async e=>{try{let e=await (0,n.Mu)(x.userId,t);console.log(e),R(!0),S.ZP.success("Status updated successfully"),b.refresh()}catch(e){console.error("Failed to update status:",e),S.ZP.error("Failed to update status")}},[z,K]=(0,s.useState)([]),[V,G]=(0,s.useState)((null==p?void 0:p.avatarImageUrl)||"/avatar-default.svg"),M=(0,s.useRef)(V);switch((0,s.useEffect)(()=>{(null==p?void 0:p.avatarImageUrl)&&(null==p?void 0:p.avatarImageUrl)!==M.current&&(G(p.avatarImageUrl),M.current=p.avatarImageUrl)},[null==p?void 0:p.avatarImageUrl]),(0,s.useEffect)(()=>{(async()=>{K(await (0,n.hH)(x.userId))})()},[x.userId]),null==p?void 0:p.status){case"AVAILABLE":m="bg-lime-600",h="AVAILABLE";break;case"BLOCK_ACCOUNT":m="bg-red-600",h="BLOCK_ACCOUNT";break;case"BLOCK_ROLE_STUDENT":m="bg-yellow-600",h="BLOCK_ROLE_STUDENT";break;case"BLOCK_ROLE_INSTRUCTOR":m="bg-yellow-600",h="BLOCK_ROLE_INSTRUCTOR";break;default:m="bg-gray-400",h="UNKNOWN"}return p&&z?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Toaster,{}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)(o.O,{items:g}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(_.l0,{...y,children:(0,r.jsxs)("form",{onSubmit:Z(P),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"sm:flex sm:justify-between sm:items-center sm:flex-col md:flex md:flex-row md:justify-between md:items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.X,{title:"Students profile",description:"You cannot change any user information (Server side table functionalities.)"}),(0,r.jsx)(c.C,{className:(0,f.cn)(m),children:h})]}),(0,r.jsx)("div",{className:"flex items-center justify-center mt-3 md:mt-0 md:gap-x-2 md:justify-end",children:(0,r.jsxs)(u.z,{className:(0,f.cn)(a),children:["CHANGE_",t]})})]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-full h-full md:w-1/3 flex justify-center items-center",children:(0,r.jsxs)(I.qE,{className:"flex items-center w-1/2 h-1/2 md:w-3/4 md:h-3/4 lg:w-1/2 lg:h-1/2",children:[(0,r.jsx)(I.F$,{src:V}),(0,r.jsx)(I.Q5,{children:(0,r.jsx)(O.P.spinner,{className:"m-auto animate-spin"})})]})}),(0,r.jsxs)("div",{className:"w-full md:w-2/3 p-4",children:[(0,r.jsx)(_.Wi,{control:y.control,name:"email",render:e=>{let{field:t}=e;return(0,r.jsxs)(_.xJ,{children:[(0,r.jsx)(_.lX,{children:"Email"}),(0,r.jsx)(_.NI,{children:(0,r.jsx)(w.I,{disabled:!0,placeholder:"e.g. 'name@example.com'",...t,onBlur:()=>D("email")})}),F.email&&(0,r.jsx)(_.zG,{children:F.email.message})]})}}),(0,r.jsx)(_.Wi,{control:y.control,name:"fullName",render:e=>{let{field:t}=e;return(0,r.jsxs)(_.xJ,{children:[(0,r.jsx)(_.lX,{children:"Full Name"}),(0,r.jsx)(_.NI,{children:(0,r.jsx)(w.I,{disabled:!0,placeholder:"e.g. 'John Doe'",...t,onBlur:()=>D("fullName")})}),F.fullName&&(0,r.jsx)(_.zG,{children:F.fullName.message})]})}}),(0,r.jsx)(_.Wi,{control:y.control,name:"phone",render:e=>{let{field:t}=e;return(0,r.jsxs)(_.xJ,{children:[(0,r.jsx)(_.lX,{children:"Phone"}),(0,r.jsx)(_.NI,{children:(0,r.jsx)(w.I,{disabled:!1,placeholder:"e.g. '1234567890'",value:t.value||"",onChange:t.onChange,onBlur:t.onBlur})}),F.phone&&(0,r.jsx)(_.zG,{children:F.phone.message})]})}}),(0,r.jsx)(_.Wi,{control:y.control,name:"joinDate",render:e=>{let{field:t}=e;return(0,r.jsxs)(_.xJ,{children:[(0,r.jsx)(_.lX,{children:"Join Date"}),(0,r.jsx)(_.NI,{children:(0,r.jsxs)(A.J2,{children:[(0,r.jsx)(A.xo,{asChild:!0,children:(0,r.jsxs)(u.z,{variant:"outline",className:(0,f.cn)("w-full justify-start text-left font-normal",!t.value&&"text-muted-foreground"),children:[(0,r.jsx)(L.Z,{className:"mr-2 h-4 w-4"}),t.value?(0,U.WU)(t.value,"HH:mm dd/MM/yyyy"):(0,r.jsx)("span",{children:"Pick a date"})]})}),(0,r.jsx)(A.yk,{className:"w-auto p-0",align:"start"})]})}),F.joinDate&&(0,r.jsx)(_.zG,{children:F.joinDate.message})]})}})]})]})]})})}),(0,r.jsx)(d.Z,{}),(0,r.jsx)(C,{columns:N,data:z})]})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-sky-800/20"}),(0,r.jsx)("p",{className:"mt-4 text-lg text-gray-700",children:"Loading..."})]})})}},41647:function(e,t,a){"use strict";a.d(t,{F$:function(){return i},Q5:function(){return d},qE:function(){return o}});var r=a(57437),s=a(2265),l=a(84827),n=a(37440);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.fC,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s})});o.displayName=l.fC.displayName;let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.Ee,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",a),...s})});i.displayName=l.Ee.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.NY,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full ",a),...s})});d.displayName=l.NY.displayName},46910:function(e,t,a){"use strict";a.d(t,{$F:function(){return u},AW:function(){return f},Ju:function(){return x},Qk:function(){return m},VD:function(){return g},Xi:function(){return h},h_:function(){return c}});var r=a(57437),s=a(2265),l=a(12460),n=a(87592),o=a(22468),i=a(28165),d=a(37440);let c=l.fC,u=l.xz,m=l.ZA;l.Uv,l.Tr,l.Ee,s.forwardRef((e,t)=>{let{className:a,inset:s,children:o,...i}=e;return(0,r.jsxs)(l.fF,{ref:t,className:(0,d.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",a),...i,children:[o,(0,r.jsx)(n.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=l.fF.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.tu,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}).displayName=l.tu.displayName;let f=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...n}=e;return(0,r.jsx)(l.Uv,{children:(0,r.jsx)(l.VY,{ref:t,sideOffset:s,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});f.displayName=l.VY.displayName;let h=s.forwardRef((e,t)=>{let{className:a,inset:s,...n}=e;return(0,r.jsx)(l.ck,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",a),...n})});h.displayName=l.ck.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,checked:n,...i}=e;return(0,r.jsxs)(l.oC,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.wU,{children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})}),s]})}).displayName=l.oC.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(l.Rk,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.wU,{children:(0,r.jsx)(i.Z,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=l.Rk.displayName;let x=s.forwardRef((e,t)=>{let{className:a,inset:s,...n}=e;return(0,r.jsx)(l.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...n})});x.displayName=l.__.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});g.displayName=l.Z0.displayName},26975:function(e,t,a){"use strict";a.d(t,{RM:function(){return i},SC:function(){return d},iA:function(){return n},pj:function(){return u},ss:function(){return c},xD:function(){return o}});var r=a(57437),s=a(2265),l=a(37440);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",a),...s})})});n.displayName="Table";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",a),...s})});o.displayName="TableHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...s})});i.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});d.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,l.cn)("p-4 pl-8 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption"}},function(e){e.O(0,[5508,6018,4810,209,3671,5192,6765,7138,6399,1162,8400,5234,6634,9920,2971,7023,1744],function(){return e(e.s=64437)}),_N_E=e.O()}]);